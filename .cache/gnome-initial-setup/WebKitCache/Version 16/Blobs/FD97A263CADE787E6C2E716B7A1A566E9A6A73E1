/*!
 * 1DS JS SDK Core, 2.3.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.oneDS=e.oneDS||{})}(this,function(c){"use strict";var i="function",o="object",n="undefined",a="prototype",s="hasOwnProperty";function e(){return typeof globalThis!==n&&globalThis?globalThis:typeof self!==n&&self?self:typeof window!==n&&window?window:typeof global!==n&&global?global:null}function r(e){var n=Object.create;if(n)return n(e);if(null==e)return{};var t=typeof e;if(t!==o&&t!==i)throw new TypeError("Object prototype may only be an Object:"+e);function r(){}return r[a]=e,new r}function t(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object[a][s].call(n,i)&&(e[i]=n[i]);return e}var u=function(e,n){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n[s](t)&&(e[t]=n[t])})(e,n)};var l,f,g=e()||{};f=function(e,n){function t(){this.constructor=e}u(e,n),e[a]=null===n?r(n):(t[a]=n[a],new t)},(l=g).__assign=l.__assign||Object.assign||t,l.__extends=l.__extends||f,__assign=g.__assign,__extends=g.__extends;var d={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5},v=o,h="window",p="document",m="navigator",y="JSON",x="crypto",C=e;function S(e){var n=C();return n&&n[e]?n[e]:e===h&&T()?window:null}function T(){return Boolean(typeof window===v&&window)}function b(){return T()?window:S(h)}function w(){return Boolean(typeof document===v&&document)}function I(){return w()?document:S(p)}function _(){return Boolean(typeof navigator===v&&navigator)}function E(){return _()?navigator:S(m)}function P(){return Boolean(typeof history===v&&history)}function A(){return Boolean(typeof JSON===v&&JSON||null!==S(y))}function N(){return A()?JSON||S(y):null}var O="attachEvent",L="addEventListener",F="detachEvent",D="removeEventListener";function M(e,n){return typeof e===n}function U(e){return M(e,n)||e===undefined}function j(e){return U(e)||null===e}function R(e,n){return e&&Object[a].hasOwnProperty.call(e,n)}function k(e){return M(e,o)}function B(e){return M(e,i)}function z(e,n,t,r){void 0===r&&(r=!1);var i=!1;if(!j(e))try{j(e[L])?j(e[O])||(e[O]("on"+n,t),i=!0):(e[L](n,t,r),i=!0)}catch(o){}return i}function V(e,n,t,r){if(void 0===r&&(r=!1),!j(e))try{j(e[D])?j(e[F])||e[F]("on"+n,t):e[D](n,t,r)}catch(i){}}var q=(G.isDate=function(e){return"[object Date]"===Object[a].toString.call(e)},G.isString=function(e){return M(e,"string")},G.isNumber=function(e){return M(e,"number")},G.isBoolean=function(e){return M(e,"boolean")},G.disableCookies=function(){G._canUseCookies=!1},G.newGuid=function(){function t(){var e=S(x);return e?e.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random()}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(H,function(e){var n=0|t();return("x"===e?n:3&n|8).toString(16)})},G.toISOString=function(e){if(G.isDate(e)){var n=function(e){var n=String(e);return 1===n.length&&(n="0"+n),n};return e.getUTCFullYear()+"-"+n(e.getUTCMonth()+1)+"-"+n(e.getUTCDate())+"T"+n(e.getUTCHours())+":"+n(e.getUTCMinutes())+":"+n(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},G.arrForEach=function(e,n,t){for(var r=e.length,i=0;i<r;++i)i in e&&n.call(t||e,e[i],i,e)},G.arrIndexOf=function(e,n,t){for(var r=e.length,i=t||0,o=Math.max(0<=i?i:r-Math.abs(i),0);o<r;o++)if(o in e&&e[o]===n)return o;return-1},G.arrMap=function(e,n,t){for(var r=e.length,i=t||e,o=new Array(r),a=0;a<r;a++)a in e&&(o[a]=n.call(i,e[a],e));return o},G.arrReduce=function(e,n,t){var r,i=e.length,o=0;if(3<=arguments.length)r=t;else{for(;o<i&&!(o in e);)o++;r=e[o++]}for(;o<i;)o in e&&(r=n(r,e[o],o,e)),o++;return r},G.strTrim=function(e){return G.isString(e)?e.replace(/^\s+|\s+$/g,""):e},G.objKeys=function(e){var n=!{toString:null}.propertyIsEnumerable("toString");if(!(B(e)||k(e)&&null!==e))throw new TypeError("objKeys called on non-object");var t=[];for(var r in e)R(e,r)&&t.push(r);if(n)for(var i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=i.length,a=0;a<o;a++)R(e,i[a])&&t.push(i[a]);return t},G.objDefineAccessors=function(e,n,t,r){var i=Object.defineProperty;if(i)try{var o={enumerable:!0,configurable:!0};return t&&(o.get=t),r&&(o.set=r),i(e,n,o),!0}catch(a){}return!1},G.addEventHandler=function(e,n){var t=!1,r=b();r&&(t=z(r,e,n),t=z(r.body,e,n)||t);var i=I();return i&&(t=K.Attach(i,e,n)||t),t},G.isTypeof=M,G.isUndefined=U,G.isNullOrUndefined=j,G.hasOwnProperty=R,G.isFunction=B,G.isObject=k,G.objCreate=r,G);function G(){}var W,H=/[xy]/g,K=(Q.Attach=z,Q.AttachEvent=z,Q.Detach=V,Q.DetachEvent=V,Q);function Q(){}(W=c.LoggingSeverity||(c.LoggingSeverity={}))[W.CRITICAL=1]="CRITICAL",W[W.WARNING=2]="WARNING";var J={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99},X=(Z.sanitizeDiagnosticText=function(e){return e?'"'+e.replace(/\"/g,"")+'"':""},Z.dataType="MessageData",Z.AiNonUserActionablePrefix="AI (Internal): ",Z.AiUserActionablePrefix="AI: ",Z);function Z(e,n,t,r){void 0===t&&(t=!1),this.messageId=e,this.message=(t?Z.AiUserActionablePrefix:Z.AiNonUserActionablePrefix)+e;var i="";A()&&(i=N().stringify(r));var o=(n?" message:"+Z.sanitizeDiagnosticText(n):"")+(r?" props:"+Z.sanitizeDiagnosticText(i):"");this.message+=o}var $=(Y.prototype.throwInternal=function(e,n,t,r,i){void 0===i&&(i=!1);var o,a=new X(n,t,i,r),s=this;if(s.enableDebugExceptions())throw a;!q.isUndefined(a)&&a&&(q.isUndefined(a.message)||(i?(o=+a.messageId,!s._messageLogged[o]&&s.consoleLoggingLevel()>=c.LoggingSeverity.WARNING&&(s.warnToConsole(a.message),s._messageLogged[o]=!0)):s.consoleLoggingLevel()>=c.LoggingSeverity.WARNING&&s.warnToConsole(a.message),s.logInternalMessage(e,a)))},Y.prototype.warnToConsole=function(e){!q.isUndefined(console)&&console&&(q.isFunction(console.warn)?console.warn(e):q.isFunction(console.log)&&console.log(e))},Y.prototype.resetInternalMessageCount=function(){this._messageCount=0,this._messageLogged={}},Y.prototype.logInternalMessage=function(e,n){var t,r,i,o,a=this;a._areInternalMessagesThrottled()||(t=!0,r=a.AIInternalMessagePrefix+n.messageId,a._messageLogged[r]?t=!1:a._messageLogged[r]=!0,t&&(e<=a.telemetryLoggingLevel()&&(a.queue.push(n),a._messageCount++),a._messageCount===a.maxInternalMessageLimit()&&(o=new X(J.MessageLimitPerPVExceeded,i="Internal events throttle limit per PageView reached for this app.",!1),a.queue.push(o),a.warnToConsole(i))))},Y.prototype._areInternalMessagesThrottled=function(){return this._messageCount>=this.maxInternalMessageLimit()},Y);function Y(e){this.queue=[],this.AIInternalMessagePrefix="AITR_",this._messageCount=0,this._messageLogged={},this.enableDebugExceptions=function(){return!1},this.consoleLoggingLevel=function(){return 0},this.telemetryLoggingLevel=function(){return 1},this.maxInternalMessageLimit=function(){return 25},q.isNullOrUndefined(e)||(q.isNullOrUndefined(e.loggingLevelConsole)||(this.consoleLoggingLevel=function(){return e.loggingLevelConsole}),q.isNullOrUndefined(e.loggingLevelTelemetry)||(this.telemetryLoggingLevel=function(){return e.loggingLevelTelemetry}),q.isNullOrUndefined(e.maxMessageLimit)||(this.maxInternalMessageLimit=function(){return e.maxMessageLimit}),q.isNullOrUndefined(e.enableDebugExceptions)||(this.enableDebugExceptions=function(){return e.enableDebugExceptions}))}var ee=q.isFunction,ne=function(i,o){var a=this,s=null,u=ee(i.processTelemetry),l=ee(i.setNextPlugin);a._hasRun=!1,a.getPlugin=function(){return i},a.getNext=function(){return s},a.setNext=function(e){s=e},a.processTelemetry=function(e,n){if(n=n||o,i&&u){a._hasRun=!0;try{n.setNext(s),l&&i.setNextPlugin(s),s&&(s._hasRun=!1),i.processTelemetry(e,n)}catch(r){var t=s&&s._hasRun;s&&t||n.diagLog().throwInternal(c.LoggingSeverity.CRITICAL,J.PluginException,"Plugin ["+i.identifier+"] failed during processTelemetry - "+r),s&&!t&&s.processTelemetry(e,n)}}else s&&(a._hasRun=!0,s.processTelemetry(e,n))}},te=q.isNullOrUndefined;function re(e,n){var t=[];if(e&&0<e.length)for(var r=null,i=0;i<e.length;i++){var o,a=e[i];a&&q.isFunction(a.processTelemetry)&&(o=new ne(a,n),t.push(o),r&&r.setNext(o),r=o)}return 0<t.length?t[0]:null}var ie=function Ut(e,o,t,n){var r,i,a,s,u,l=this,c=null;null!==n&&(e&&q.isFunction(e.getPlugin)?c=function(e,n,t){var r=[],i=!t;if(e)for(;e;){var o=e.getPlugin();!i&&o!==t||(i=!0,r.push(o)),e=e.getNext()}return i||r.push(t),re(r,n)}(e,l,n||e.getPlugin()):n?(i=l,s=r=e,u=!1,(a=n)&&r&&(s=[],q.arrForEach(r,function(e){!u&&e!==a||(u=!0,s.push(e))})),a&&!u&&(s=s||[]).push(a),c=re(s,i)):q.isUndefined(n)&&(c=re(e,l))),l.core=function(){return t},l.diagLog=function(){return(t||{}).logger||new $(o||{})},l.getCfg=function(){return o},l.getExtCfg=function(e,n){var t,r;return void 0===n&&(n={}),!o||(r=o.extensionConfig)&&e&&(t=r[e]),t||n},l.getConfig=function(e,n,t){var r;void 0===t&&(t=!1);var i=l.getExtCfg(e,null);return i&&!te(i[n])?r=i[n]:o&&!te(o[n])&&(r=o[n]),te(r)?t:r},l.hasNext=function(){return null!=c},l.getNext=function(){return c},l.setNext=function(e){c=e},l.processNext=function(e){var n=c;n&&(c=n.getNext(),n.processTelemetry(e,l))},l.createNew=function(e,n){return void 0===e&&(e=null),new Ut(e||c,o,t,n)}},oe=q.isFunction,ae="getPlugin",se=(ue.prototype.initialize=function(e,n,t,r){this._baseTelInit(e,n,t,r)},ue);function ue(){var o=this,a=!1,s=null,u=null;o.core=null,o.diagLog=function(e){return o._getTelCtx(e).diagLog()},o.isInitialized=function(){return a},o.setInitialized=function(e){a=e},o.setNextPlugin=function(e){u=e},o.processNext=function(e,n){n?n.processNext(e):u&&oe(u.processTelemetry)&&u.processTelemetry(e,null)},o._getTelCtx=function(e){void 0===e&&(e=null);var n,t=e;return t||(n=s||new ie(null,{},o.core),t=u&&u[ae]?n.createNew(null,u[ae]):n.createNew(null,u)),t},o._baseTelInit=function(e,n,t,r){e&&(e.extensionConfig=e.extensionConfig||[]),!r&&n&&(r=n.getProcessTelContext().getNext());var i=u;u&&u[ae]&&(i=u[ae]()),o.core=n,s=new ie(r,e,n,i),a=!0}}var le=q.isFunction,ce="processTelemetry",fe="priority",ge="setNextPlugin",de="isInitialized";function ve(n,t){for(var e=[],r=null,i=n.getNext();i;){var o=i.getPlugin();o&&(r&&le(r[ge])&&le(o[ce])&&r[ge](o),le(o[de])&&o[de]()||e.push(o),r=o,i=i.getNext())}q.arrForEach(e,function(e){e.initialize(n.getCfg(),n.core(),t,n.getNext())})}function he(e){return e.sort(function(e,n){var t=0,r=le(n[ce]);return le(e[ce])?t=r?e[fe]-n[fe]:1:r&&(t=-1),t})}var pe=500,me="Channel has invalid priority",ye=q.arrForEach,xe=q.objDefineAccessors;function Se(e,n){n&&0<n.length&&(n=n.sort(function(e,n){return e.priority-n.priority}),ye(n,function(e){if(e.priority<pe)throw Error(me+e.identifier)}),e.push(n))}var Ce,Te=(Ce=se,__extends(be,Ce),be.prototype.processTelemetry=function(n,t){var r=this;this._channelQueue&&ye(this._channelQueue,function(e){0<e.length&&r._getTelCtx(t).createNew(e).processNext(n)})},be.prototype.getChannelControls=function(){return this._channelQueue},be.prototype.initialize=function(n,t,r){var e,i,o,a,s;this.isInitialized()||(Ce.prototype.initialize.call(this,n,t,r),n.isCookieUseDisabled&&q.disableCookies(),e=this._channelQueue=(o=r,s=[],(i=(n||{}).channels)&&ye(i,function(e){return Se(s,e)}),o&&(a=[],ye(o,function(e){e.priority>pe&&a.push(e)}),Se(s,a)),s),ye(e,function(e){return ve(new ie(e,n,t),r)}))},be._staticInit=(xe(be.prototype,"ChannelControls",be.prototype.getChannelControls),void xe(be.prototype,"channelQueue",be.prototype.getChannelControls)),be);function be(){var e=null!==Ce&&Ce.apply(this,arguments)||this;return e.identifier="ChannelControllerPlugin",e.priority=pe,e}var we=q.arrForEach,Ie=q.isNullOrUndefined,_e=(Ee.prototype.initialize=function(e,n,r,t){var i=this;if(i.isInitialized())throw Error("Core should not be initialized more than once");if(!e||Ie(e.instrumentationKey))throw Error("Please provide instrumentation key");i.config=e;var o=i._channelController;t=t||q.objCreate({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,n){},eventsSendRequest:function(e,n){}}),i._notificationManager=t,e.extensions=Ie(e.extensions)?[]:e.extensions,(e.extensionConfig=Ie(e.extensionConfig)?{}:e.extensionConfig).NotificationManager=t,r=r||q.objCreate({throwInternal:function(e,n,t,r,i){void 0===i&&(i=!1)},warnToConsole:function(e){},resetInternalMessageCount:function(){}}),i.logger=r;var a=[];a.push.apply(a,n.concat(e.extensions)),a=he(a);var s=[],u={};if(we(a,function(e){if(Ie(e)||Ie(e.initialize))throw Error("Extensions must provide callback to initialize");var n=e.priority,t=e.identifier;e&&n&&(Ie(u[n])?u[n]=t:r.warnToConsole("Two extensions have same priority #"+n+" - "+u[n]+", "+t)),(!n||n<o.priority)&&s.push(e)}),a.push(o),s.push(o),a=he(a),i._extensions=a,ve(new ie([o],e,i),a),ve(new ie(s,e,i),a),i._extensions=s,0===i.getTransmissionControls().length)throw new Error("No channels available");i._setInit(!0)},Ee.prototype.getTransmissionControls=function(){return this._channelController.getChannelControls()},Ee.prototype.track=function(e){var n=this;e.iKey||(e.iKey=n.config.instrumentationKey),e.time||(e.time=q.toISOString(new Date)),Ie(e.ver)&&(e.ver="4.0"),n.isInitialized()?(0<n._eventQueue.length&&(we(n._eventQueue,function(e){n.getProcessTelContext().processNext(e)}),n._eventQueue=[]),n.getProcessTelContext().processNext(e)):n._eventQueue.push(e)},Ee.prototype.getProcessTelContext=function(){var e=this._extensions,n=e;return e&&0!==e.length||(n=[this._channelController]),new ie(n,this.config,this)},Ee);function Ee(){var n=!1,e=this;e._extensions=new Array,e._channelController=new Te,e.isInitialized=function(){return n},e._setInit=function(e){n=e},e._eventQueue=[]}var Pe=(Ae.prototype.addNotificationListener=function(e){this.listeners.push(e)},Ae.prototype.removeNotificationListener=function(e){for(var n=q.arrIndexOf(this.listeners,e);-1<n;)this.listeners.splice(n,1),n=q.arrIndexOf(this.listeners,e)},Ae.prototype.eventsSent=function(n){for(var t=this,r=this,e=0;e<this.listeners.length;++e)!function(e){r.listeners[e].eventsSent&&setTimeout(function(){return t.listeners[e].eventsSent(n)},0)}(e)},Ae.prototype.eventsDiscarded=function(n,t){for(var r=this,i=this,e=0;e<this.listeners.length;++e)!function(e){i.listeners[e].eventsDiscarded&&setTimeout(function(){return r.listeners[e].eventsDiscarded(n,t)},0)}(e)},Ae.prototype.eventsSendRequest=function(t,r){for(var i=this,o=this,e=0;e<this.listeners.length;++e)!function(e){if(o.listeners[e].eventsSendRequest)if(r)setTimeout(function(){return i.listeners[e].eventsSendRequest(t,r)},0);else try{o.listeners[e].eventsSendRequest(t,r)}catch(n){}}(e)},Ae);function Ae(){this.listeners=[]}var Ne,Oe=(Ne=_e,__extends(Le,Ne),Le.prototype.initialize=function(e,n){var t=this;t._notificationManager=new Pe,t.logger=new $(e),t.config=e,Ne.prototype.initialize.call(this,e,n,t.logger,t._notificationManager)},Le.prototype.getTransmissionControls=function(){return Ne.prototype.getTransmissionControls.call(this)},Le.prototype.track=function(e){if(null===e)throw this._notifyInvalidEvent(e),Error("Invalid telemetry item");this._validateTelemetryItem(e),Ne.prototype.track.call(this,e)},Le.prototype.addNotificationListener=function(e){this._notificationManager&&this._notificationManager.addNotificationListener(e)},Le.prototype.removeNotificationListener=function(e){this._notificationManager&&this._notificationManager.removeNotificationListener(e)},Le.prototype.pollInternalLogs=function(r){var n=this,e=this.config.diagnosticLogInterval;return e&&0<e||(e=1e4),setInterval(function(){var t=n,e=t.logger?t.logger.queue:[];q.arrForEach(e,function(e){var n={name:r||"InternalMessageId: "+e.messageId,iKey:t.config.instrumentationKey,time:q.toISOString(new Date),baseType:X.dataType,baseData:{message:e.message}};t.track(n)}),e.length=0},e)},Le.prototype._validateTelemetryItem=function(e){if(q.isNullOrUndefined(e.name))throw this._notifyInvalidEvent(e),Error("telemetry name required")},Le.prototype._notifyInvalidEvent=function(e){this._notificationManager&&this._notificationManager.eventsDiscarded([e],d.InvalidEvent)},Le);function Le(){return Ne.call(this)||this}var Fe={Normal:1,CostDeferred:2,RealTime:3},De={Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9},Me=__assign({},J,{AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517}),Ue="2.3.4",je="1DS-Web-JS-"+Ue,Re="undefined",ke="object",Be=Re,ze="prototype",Ve=De,qe=null;function Ge(e,n){return typeof e===n}function We(e){return e===undefined||Ge(e,Be)}function He(e){return We(e)||null===e}function Ke(e){return!We(e)}var Qe,Je=null,Xe=null,Ze=q.arrForEach,$e=q.arrIndexOf,Ye=q.arrMap,en=q.arrReduce,nn=q.objKeys,tn=q.toISOString;function rn(e){return un(e)?e.replace(/^\s+|\s+$/g,""):e}var on=Boolean(I()),an=Boolean(b());function sn(e){return!(He(e)||""===e)}function un(e){return Ge(e,"string")}function ln(e){return Ge(e,"number")}function cn(e){return Ge(e,"boolean")}function fn(e){return Ge(e,"function")}function gn(e){if(e){var n=e.indexOf("-");if(-1<n)return e.substring(0,n)}return""}function dn(){return null===Je&&(Je=_()&&Boolean(E().sendBeacon)),Je}function vn(){return null===Xe&&(Xe=Ke(Uint8Array)&&!function(){var e=E();if(Ke(e)&&e.userAgent){var n=e.userAgent.toLowerCase();if((0<=n.indexOf("safari")||0<=n.indexOf("firefox"))&&n.indexOf("chrome")<0)return!0}return!1}()&&!yn()),Xe}function hn(e){return!!(e&&ln(e)&&1<=e&&e<=3)}function pn(e,n,t){if(!un(e)||He(n)||""===n)return null;if(un(n)||ln(n)||cn(n)||Sn(n))n={value:n};else if("object"!=typeof n||n.hasOwnProperty("value")){if(He(n.value)||""===n.value||!un(n.value)&&!ln(n.value)&&!cn(n.value)&&!Sn(n.value))return null}else n={value:t?JSON.stringify(n):n};if(Sn(n.value)&&!(0<n.value.length))return null;if(Ke(n.kind)){if(Sn(n.value)||!function(e){if(e&&ln(e)&&(0<=e&&e<=13||32===e))return!0;return!1}(n.kind))return null;n.value=n.value.toString()}return n}function mn(e){return e.getUTCFullYear()+"-"+On(e.getUTCMonth()+1)+"-"+On(e.getUTCDate())+"T"+On(e.getUTCHours())+":"+On(e.getUTCMinutes())+":"+On(e.getUTCSeconds())+"."+function(e){{if(e<10)return"00"+e;if(e<100)return"0"+e}return e.toString()}(e.getUTCMilliseconds())+"Z"}function yn(){var e=E();return!(!e||!e.product)&&"ReactNative"===e.product}function xn(){if(Ke(XMLHttpRequest)){var e=new XMLHttpRequest;return Boolean(We(e.withCredentials)&&Ke(XDomainRequest))}}function Sn(e){return e instanceof Array}function Cn(e){return e instanceof Object}function Tn(e,n,t){var r=-1;return We(e)?r:(n&&0<n&&(32===n?r=8192:n<=13&&(r=n<<5)),Ke(t)&&function(e){if(ln(e)&&0<=e&&e<=9)return!0;return!1}(t)?(-1===r&&(r=0),r|t):(Sn(e)&&(e=e[0]),-1!==r?r|function(e){if(We(e))return-1;{if(ln(e))return Ve.Double;if(un(e))return Ve.String;if(cn(e))return Ve.Bool}return-1}(e):ln(e)?Ve.Double:r))}function bn(){if(Qe===undefined){Qe=!1;try{var e=I(),n=E();e&&!We(e.cookie)&&n&&n.cookieEnabled&&(Qe=!0)}catch(t){}}return Qe}function wn(e){return!!un(e)&&(-1!==e.indexOf("CPU iPhone OS 12")||-1!==e.indexOf("iPad; CPU OS 12")||(-1!==e.indexOf("Macintosh; Intel Mac OS X 10_14")&&-1!==e.indexOf("Version/")&&-1!==e.indexOf("Safari")||(-1!==e.indexOf("Macintosh; Intel Mac OS X 10_14")&&(t="AppleWebKit/605.1.15 (KHTML, like Gecko)",r=(n=e).length,i=r-t.length,n.substring(0<=i?i:0,r)===t)||(-1!==e.indexOf("Chrome/5")||-1!==e.indexOf("Chrome/6")||(-1!==e.indexOf("UnrealEngine")&&-1===e.indexOf("Chrome")||(-1!==e.indexOf("UCBrowser/12")||-1!==e.indexOf("UCBrowser/11")))))));var n,t,r,i}function In(e,n,t){var r,i,o,a;bn()&&(r="",(i=Kn())&&"https:"===i.protocol&&(r=";secure",null===qe&&(qe=wn((E()||{}).userAgent)),qe||(n+=";SameSite=None")),(o=new Date).setTime(o.getTime()+24*t*60*60*1e3),a="; expires="+o.toUTCString(),I().cookie=e+"="+n+a+"; path=/"+r)}function _n(e){In(e,"",-1)}function En(e){if(bn()){e+="=";for(var n=decodeURIComponent((I()||{}).cookie||"").split(";"),t=0;t<n.length;t++){for(var r=n[t],i=0;" "===r.charAt(i);)i++;if(0===(r=r.substring(i)).indexOf(e))return r.substring(e.length,r.length)}}return""}function Pn(e){void 0===e&&(e="D");var n=q.newGuid();return"B"===e?n="{"+n+"}":"P"==e?n="("+n+")":"N"==e&&(n=n.replace(/-/g,"")),n}function An(e,n,t,r,i){var o={},a=!1,s=0,u=arguments.length,l=Object[ze],c=arguments;"[object Boolean]"===l.toString.call(c[0])&&(a=c[0],s++);for(var f=function(e){for(var n in e)r=n,(t=e)&&Object[ze].hasOwnProperty.call(t,r)&&(a&&"[object Object]"===l.toString.call(e[n])?o[n]=An(!0,o[n],e[n]):o[n]=e[n]);var t,r};s<u;s++){f(c[s])}return o}function Nn(){var e=Hn();return e?e.now():(new Date).getTime()}function On(e){return e<10?"0"+e:e.toString()}var Ln=q.objDefineAccessors;function Fn(e){var n=jn("beforeunload",e),n=jn("unload",e)||n;return n=jn("pagehide",e)||n}function Dn(e,n){var t=e;t.timings=t.timings||{},t.timings.processTelemetryStart=t.timings.processTelemetryStart||{},t.timings.processTelemetryStart[n]=Nn()}var Mn="attachEvent",Un="addEventListener";function jn(e,n){var t,r=!1;return an&&(t=window,r=kn.Attach(t,e,n),r=kn.Attach(t.body,e,n)||r),on&&(r=kn.Attach(document,e,n)||r),r}function Rn(e,n,t,r){void 0===r&&(r=!1);var i=!1;if(!He(e))try{He(e[Un])?He(e[Mn])||(e[Mn]("on"+n,t),i=!0):(e[Un](n,t,r),i=!0)}catch(o){}return i}var kn=(Bn.Attach=Rn,Bn);function Bn(){}var zn="window",Vn="performance",qn="location";function Gn(){return typeof globalThis!==Re&&globalThis?globalThis:typeof self!==Re&&self?self:typeof window!==Re&&window?window:typeof global!==Re&&global?global:null}function Wn(e){var n=Gn();return n&&n[e]?n[e]:e===zn&&T()?window:null}function Hn(){return Wn(Vn)}function Kn(){return typeof location===ke&&location?location:Wn(qn)}var Qn,Jn=function(e){var n=Object.freeze;return n?n(e):e}({Version:Ue,FullVersionString:je,strUndefined:Re,strObject:ke,Undefined:Be,arrForEach:Ze,arrIndexOf:$e,arrMap:Ye,arrReduce:en,objKeys:nn,toISOString:tn,strTrim:rn,isDocumentObjectAvailable:on,isWindowObjectAvailable:an,isValueAssigned:sn,isString:un,isNumber:ln,isBoolean:cn,isFunction:fn,getTenantId:gn,isBeaconsSupported:dn,isUint8ArrayAvailable:vn,isLatency:hn,sanitizeProperty:pn,getISOString:mn,isReactNative:yn,useXDomainRequest:xn,isArray:Sn,isObject:Cn,getCommonSchemaMetaData:Tn,cookieAvailable:bn,disallowsSameSiteNone:wn,setCookie:In,deleteCookie:_n,getCookie:En,createGuid:Pn,extend:An,getTime:Nn,objDefineAccessors:Ln,addPageUnloadEventListener:Fn,setProcessTelemetryTimings:Dn,addEventHandler:jn,EventHelper:kn,getGlobal:Gn,getGlobalInst:Wn,getPerformance:Hn,getLocation:Kn}),Xn="version",Zn="properties",$n=(Qn=Oe,__extends(Yn,Qn),Yn.prototype.initialize=function(e,n){if(e){e.endpointUrl||(e.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var t=e.propertyStorageOverride;if(t&&(!t.getProperty||!t.setProperty))throw"Invalid property storage override passed.";if(e.channels)for(var r=0;r<e.channels.length;r++)if(e.channels[r])for(var i=0;i<e.channels[r].length;i++){var o=e.channels[r][i];o.identifier&&o.version&&(a=o.identifier+"="+o.version,this.pluginVersionStringArr.push(a))}}if(this.getWParam=function(){return"undefined"!=typeof document?0:-1},n)for(r=0;r<n.length;r++){var a,s=n[r];s.identifier&&s.version&&(a=s.identifier+"="+s.version,this.pluginVersionStringArr.push(a))}this.pluginVersionString=this.pluginVersionStringArr.join(";");try{Qn.prototype.initialize.call(this,e,n)}catch(u){this.logger.throwInternal(c.LoggingSeverity.CRITICAL,Me.ErrorProvidedChannels,"Channels must be provided through config.channels only")}this.pollInternalLogs("InternalLog")},Yn.prototype.track=function(e){var n,t,r,i=e;i&&(i.timings=i.timings||{},i.timings.trackStart=Nn(),hn(i.latency)||(i.latency=Fe.Normal),(n=i.ext=i.ext||{}).sdk=n.sdk||{},n.sdk.ver=je,(t=i.baseData=i.baseData||{})[Zn]||(t[Zn]={}),(r=t[Zn])[Xn]||(r[Xn]=""),""!=this.pluginVersionString&&(r[Xn]=this.pluginVersionString)),Qn.prototype.track.call(this,i)},Yn);function Yn(){var e=null!==Qn&&Qn.apply(this,arguments)||this;return e.pluginVersionStringArr=[],e.pluginVersionString="",e}var et,nt=(et=_e,__extends(tt,et),tt.prototype.initialize=function(e,n){e&&(e.endpointUrl||(e.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/")),this.getWParam=function(){return on?0:-1};try{et.prototype.initialize.call(this,e,n)}catch(t){this.logger.throwInternal(c.LoggingSeverity.CRITICAL,Me.ErrorProvidedChannels,"Channels must be provided through config.channels only")}},tt.prototype.track=function(e){var n=e;n&&(n.ext=n.ext||{},n.ext.sdk=n.ext.sdk||{},n.ext.sdk.ver=je),et.prototype.track.call(this,n)},tt);function tt(){return null!==et&&et.apply(this,arguments)||this}var rt="constructor",it="prototype",ot="function",at="_dynInstFuncs",st="_isDynProxy",ut="_dynClass",lt="_dynCls$",ct="_unknown_",ft="__proto__",gt=Object.getPrototypeOf,dt=0;function vt(e,n){return e&&Object[it].hasOwnProperty.call(e,n)}function ht(e){return typeof e===ot}function pt(e){return e&&(e===Object[it]||e===Array[it])}function mt(e){return pt(e)||e===Function[it]}function yt(e){if(e){if(gt)return gt(e);var n=e[ft]||e[it]||e[rt];if(n)return n}return null}function xt(e,n,t){return n!==rt&&ht(e[n])&&(t||vt(e,n))}function St(e){throw new TypeError("DynamicProto: "+e)}function Ct(e,n,t){function r(e,n){return function(){return n.apply(e,arguments)}}var i={};for(var o in t)i[o]=r(n,t[o]);for(var a=yt(e),s=[];a&&!mt(a)&&!function(e,n){for(var t=e.length-1;0<=t;t--)if(e[t]===n)return 1}(s,a);){for(var o in a)!i[o]&&xt(a,o,!gt)&&(i[o]=r(n,a[o]));s.push(a),a=yt(a)}return i}function Tt(e,n,t,r){if(!pt(e)){var i=t[at]=t[at]||{},o=i[n]=i[n]||{};for(var a in t)xt(t,a,!1)&&t[a]!==r[a]&&(o[a]=t[a],delete t[a],vt(e,a)&&(!e[a]||e[a][st])||(e[a]=function(t,r){var i=function(){if(this&&vt(t,ut)){var e=((this[at]||{})[t[ut]]||{})[r];if(e)return e.apply(this,arguments);St("Missing ["+r+"] "+ot)}var n=t[r];return n===i&&(n=yt(t)[r]),ht(n)||St("["+r+"] is not a "+ot),n.apply(this,arguments)};return i[st]=1,i}(e,a)))}}function bt(e,n){return vt(e,it)?e.name||n||ct:((e||{})[rt]||{}).name||n||ct}function wt(e,n,t){vt(e,it)||St("theClass is an invalid class definition.");var r=e[it];!function(e,n){for(var t=yt(n);t&&!mt(t);){if(t===e)return 1;t=yt(t)}}(r,n)&&St("["+bt(e)+"] is not in class heirarchy of ["+bt(n)+"]");var i=null;vt(r,ut)?i=r[ut]:(i=lt+bt(e,"_")+"$"+dt,dt++,r[ut]=i);var o=function(e){var n={};for(var t in e)!n[t]&&xt(e,t,!1)&&(n[t]=e[t]);return n}(n);t(n,Ct(r,n,o)),Tt(r,i,n,o)}var It=fn;var _t=(Et.resolve=function(r){return r instanceof Et?r:r&&It(r.then)?new Et(function(e,n){try{r.then(e,n)}catch(t){n(t)}}):new Et(function(e){e(r)})},Et.reject=function(t){return new Et(function(e,n){n(t)})},Et.all=function(s){if(s&&s.length)return new Et(function(e,n){try{for(var t=[],r=0,i=0;i<s.length;i++){var o=s[i];o&&It(o.then)?(r++,o.then(function(n,t,r){return function(e){n[t]=e,r()}}(t,i,function(){0==--r&&e(t)}),n)):t[i]=o}0===r&&setTimeout(function(){e(t)},0)}catch(a){n(a)}})},Et.race=function(i){return new Et(function(t,r){if(i&&i.length)try{for(var e=0;e<i.length;e++)!function(e){var n=i[e];n&&It(n.then)?n.then(t,r):setTimeout(function(){t(n)},0)}(e)}catch(n){r(n)}})},Et);function Et(n){var u=0,l=null,c=[];function f(){var r;0<c.length&&(r=c.slice(),c=[],setTimeout(function(){for(var e=0,n=r.length;e<n;++e)try{r[e]()}catch(t){}},0))}function t(e){0===u&&(l=e,u=1,f())}function r(e){0===u&&(l=e,u=2,f())}wt(Et,this,function(n){n.then=function(a,s){return new Et(function(e,n){var t,r,i,o;t=a,r=s,i=e,o=n,c.push(function(){var e;try{(e=1===u?It(t)?t(l):l:It(r)?r(l):l)instanceof Et?e.then(i,o):(2!==u||It(r)?i:o)(e)}catch(n){return void o(n)}}),0!==u&&f()})},n["catch"]=function(e){return n.then(null,e)}}),function(){if(!It(n))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{n(t,r)}catch(e){r(e)}}()}var Pt=6e5,At=0,Nt=[],Ot=[],Lt=[];function Ft(){return(new Date).getTime()}var Dt=(Mt.incomplete=function(){return Nt},Mt.waitingToStart=function(){return Ot},Mt);function Mt(e,n){var m=0,y=(e||"<unnamed>")+"."+At;function x(e){var n=C();n&&n.QUnit&&console&&console.log("ESPromiseScheduler["+y+"] "+e)}function S(e){n&&n.warnToConsole("ESPromiseScheduler["+y+"] "+e)}At++,wt(Mt,this,function(e){var v=null,h=0;function p(e,n){for(var t=0;t<e.length;t++)if(e[t].id==n)return e.splice(t,1)[0];return null}e.scheduleEvent=function(t,e,s){var i=y+"."+h;h++,e&&(i+="-("+e+")");var n=i+"{"+m+"}";m++;var o,a,r,u={evt:null,tm:Ft(),id:n,isRunning:!1,isAborted:!1};return u.evt=v?(o=u,a=v,r=new _t(function(n,t){var e=Ft()-a.tm,r=a.id;x("["+i+"] is waiting for ["+r+":"+e+" ms] to complete before starting -- ["+Ot.length+"] waiting and ["+Nt.length+"] running"),o.abort=function(e){o.abort=null,p(Ot,i),o.isAborted=!0,t(new Error(e))},a.evt.then(function(e){p(Ot,i),d(o).then(n,t)},function(e){p(Ot,i),d(o).then(n,t)})}),Ot.push(o),r):d(u),(v=u).evt._schId=n,u.evt;function l(e){for(var n=Ft(),t=n-Pt,r=e.length,i=0;i<r;){var o,a=e[i];a&&a.tm<t?(o=null,a.abort?(o="Aborting ["+a.id+"] due to Excessive runtime ("+(n-a.tm)+" ms)",a.abort(o)):o="Removing ["+a.id+"] due to Excessive runtime ("+(n-a.tm)+" ms)",S(o),e.splice(i,1),r--):i++}}function c(e,n){var t,r=!1,i=p(Nt,e);i||(i=p(Lt,e),r=!0),i?(i.to&&(clearTimeout(i.to),i.to=null),t=Ft()-i.tm,n?r?S("Timed out event ["+e+"] finally complete -- "+t+" ms"):x("Promise ["+e+"] Complete -- "+t+" ms"):(Lt.push(i),S("Event ["+e+"] Timed out and removed -- "+t+" ms"))):x("Failed to remove ["+e+"] from running queue"),v&&v.id===e&&(v=null),l(Nt),l(Ot),l(Lt)}function f(n,t){return function(e){return c(n,!0),t&&t(e),e}}function g(r,o){var a=r.id;return new _t(function(n,t){x("Event ["+a+"] Starting -- waited for "+(r.wTm||"--")+" ms"),r.isRunning=!0,r.abort=function(e){r.abort=null,r.isAborted=!0,c(a,!1),t(new Error(e))};var e=o(a);e instanceof _t?(s&&(r.to=setTimeout(function(){c(a,!1),t(new Error("Timed out after ["+s+"] ms"))},s)),function i(n,e,t,r){e.then(function(e){return e instanceof _t?(x("Event ["+n+"] returned a promise -- waiting"),i(n,e,t,r),e):f(n,t)(e)},f(n,r))}(a,e,function(e){x("Event ["+a+"] Resolving after "+(Ft()-r.tm)+" ms"),n(e)},t)):(x("Promise ["+a+"] Auto completed as the start action did not return a promise"),n())})}function d(e){var n=Ft();return e.wTm=n-e.tm,e.tm=n,e.isAborted?_t.reject(new Error("["+i+"] was aborted")):(Nt.push(e),g(e,t))}}})}c.ValueKind={NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32},c.Utils=Jn,c.EventLatency=Fe,c.EventPersistence={Normal:1,Critical:2},c.TraceLevel={NONE:0,ERROR:1,WARNING:2,INFORMATION:3},c.AppInsightsCore=$n,c.BaseCore=nt,c._ExtendedInternalMessageId=Me,c.EventPropertyType=De,c.ESPromise=_t,c.ESPromiseScheduler=Dt,c.NotificationManager=Pe,c.BaseTelemetryPlugin=se,c.ProcessTelemetryContext=ie,c.MinChannelPriorty=100,c.EventsDiscardedReason=d,c.CoreUtils=q,c.DiagnosticLogger=$,c.hasWindow=T,c.getWindow=b,c.hasDocument=w,c.getDocument=I,c.hasNavigator=_,c.getNavigator=E,c.hasHistory=P,c.getHistory=function(){return P()?history:S("history")},c.hasJSON=A,c.getJSON=N,c.isValueAssigned=sn,c.isArray=Sn,c.isObject=Cn,c.isBeaconsSupported=dn,c.isBoolean=cn,c.isLatency=hn,c.isNumber=ln,c.isReactNative=yn,c.isString=un,c.isUint8ArrayAvailable=vn,c.getISOString=mn,c.cookieAvailable=bn,c.getTenantId=gn,c.sanitizeProperty=pn,c.Version=Ue,c.FullVersionString=je,c.Undefined=Be,c.getCommonSchemaMetaData=Tn,c.getCookie=En,c.setCookie=In,c.deleteCookie=_n,c.extend=An,c.createGuid=Pn,c.useXDomainRequest=xn,c.isDocumentObjectAvailable=on,c.isWindowObjectAvailable=an,c.objDefineAccessors=Ln,c.addPageUnloadEventListener=Fn,c.EventHelper=kn,c.addEventHandler=jn,c.setProcessTelemetryTimings=Dn,c.getTime=Nn,c.objKeys=nn,c.arrForEach=Ze,c.isFunction=fn,c.getGlobal=Gn,c.getGlobalInst=Wn,c.getPerformance=Hn,c.getLocation=Kn,c.disallowsSameSiteNone=wn,c.strObject=ke,c.strUndefined=Re,c.strTrim=rn,function(e,n,t){var r=Object.defineProperty;if(r)try{return r(e,n,t)}catch(i){}typeof t.value!==undefined&&(e[n]=t.value)}(c,"__esModule",{value:!0})});
//# sourceMappingURL=ms.core-2.3.4.min.js.map

/*!
 * 1DS JS SDK POST plugin, 2.3.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.oneDS=e.oneDS||{})}(this,function(e){"use strict";var t="function",n="object",i="undefined",r="prototype",o="hasOwnProperty";function s(){return typeof globalThis!==i&&globalThis?globalThis:typeof self!==i&&self?self:typeof window!==i&&window?window:typeof global!==i&&global?global:null}function a(e){var i=Object.create;if(i)return i(e);if(null==e)return{};var o=typeof e;if(o!==n&&o!==t)throw new TypeError("Object prototype may only be an Object:"+e);function s(){}return s[r]=e,new s}var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[o](n)&&(e[n]=t[n])})(e,t)};var l,c,f,h=s()||{};c=function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object[r][o].call(t,s)&&(e[s]=t[s]);return e},f=function(e,t){function n(){this.constructor=e}u(e,t),e[r]=null===t?a(t):(n[r]=t[r],new n)},(l=h).__assign=l.__assign||Object.assign||c,l.__extends=l.__extends||f,__assign=h.__assign,__extends=h.__extends;var d=1,p=2,g=3,_=4,v=5,m=n,y="window",C="document",T="navigator",S="JSON",x="crypto",b=s;function w(e){var t=b();return t&&t[e]?t[e]:e===y&&E()?window:null}function E(){return Boolean(typeof window===m&&window)}function I(){return E()?window:w(y)}function M(){return Boolean(typeof document===m&&document)?document:w(C)}function O(){return Boolean(typeof navigator===m&&navigator)}function R(){return O()?navigator:w(T)}function P(){return Boolean(typeof JSON===m&&JSON||null!==w(S))}var k="on",A="attachEvent",L="addEventListener",N="detachEvent",F="removeEventListener";function B(e,t){return typeof e===t}function Q(e){return B(e,i)||void 0===e}function q(e){return Q(e)||null===e}function D(e,t){return e&&Object[r].hasOwnProperty.call(e,t)}function z(e){return B(e,n)}function U(e){return B(e,t)}function j(e,t,n,i){void 0===i&&(i=!1);var r=!1;if(!q(e))try{q(e[L])?q(e[A])||(e[A](k+t,n),r=!0):(e[L](t,n,i),r=!0)}catch(e){}return r}function H(e,t,n,i){if(void 0===i&&(i=!1),!q(e))try{q(e[F])?q(e[N])||e[N](k+t,n):e[F](t,n,i)}catch(e){}}var K,V=function(){function e(){}return e.isDate=function(e){return"[object Date]"===Object[r].toString.call(e)},e.isString=function(e){return B(e,"string")},e.isNumber=function(e){return B(e,"number")},e.isBoolean=function(e){return B(e,"boolean")},e.disableCookies=function(){e._canUseCookies=!1},e.newGuid=function(){function e(){var e=w(x);return e?e.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random()}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(W,function(t){var n=0|e();return("x"===t?n:3&n|8).toString(16)})},e.toISOString=function(t){if(e.isDate(t)){var n=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},e.arrForEach=function(e,t,n){for(var i=e.length,r=0;r<i;++r)r in e&&t.call(n||e,e[r],r,e)},e.arrIndexOf=function(e,t,n){for(var i=e.length,r=n||0,o=Math.max(r>=0?r:i-Math.abs(r),0);o<i;o++)if(o in e&&e[o]===t)return o;return-1},e.arrMap=function(e,t,n){for(var i=e.length,r=n||e,o=new Array(i),s=0;s<i;s++)s in e&&(o[s]=t.call(r,e[s],e));return o},e.arrReduce=function(e,t,n){var i,r=e.length,o=0;if(arguments.length>=3)i=arguments[2];else{for(;o<r&&!(o in e);)o++;i=e[o++]}for(;o<r;)o in e&&(i=t(i,e[o],o,e)),o++;return i},e.strTrim=function(t){return e.isString(t)?t.replace(/^\s+|\s+$/g,""):t},e.objKeys=function(e){var t=!{toString:null}.propertyIsEnumerable("toString");if(!(U(e)||z(e)&&null!==e))throw new TypeError("objKeys called on non-object");var n=[];for(var i in e)D(e,i)&&n.push(i);if(t)for(var r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=r.length,s=0;s<o;s++)D(e,r[s])&&n.push(r[s]);return n},e.objDefineAccessors=function(e,t,n,i){var r=Object.defineProperty;if(r)try{var o={enumerable:!0,configurable:!0};return n&&(o.get=n),i&&(o.set=i),r(e,t,o),!0}catch(e){}return!1},e.addEventHandler=function(e,t){var n=!1,i=I();i&&(n=j(i,e,t),n=j(i.body,e,t)||n);var r=M();return r&&(n=X.Attach(r,e,t)||n),n},e.isTypeof=B,e.isUndefined=Q,e.isNullOrUndefined=q,e.hasOwnProperty=D,e.isFunction=U,e.isObject=z,e.objCreate=a,e}(),W=/[xy]/g,X=function(){function e(){}return e.Attach=j,e.AttachEvent=j,e.Detach=H,e.DetachEvent=H,e}();!function(e){e[e.CRITICAL=1]="CRITICAL",e[e.WARNING=2]="WARNING"}(K||(K={}));var G={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99},J=function(){function e(t,n,i,r){void 0===i&&(i=!1),this.messageId=t,this.message=(i?e.AiUserActionablePrefix:e.AiNonUserActionablePrefix)+t;var o="";P()&&(o=(P()?JSON||w(S):null).stringify(r));var s=(n?" message:"+e.sanitizeDiagnosticText(n):"")+(r?" props:"+e.sanitizeDiagnosticText(o):"");this.message+=s}return e.sanitizeDiagnosticText=function(e){return e?'"'+e.replace(/\"/g,"")+'"':""},e.dataType="MessageData",e.AiNonUserActionablePrefix="AI (Internal): ",e.AiUserActionablePrefix="AI: ",e}(),$=function(){function e(e){this.queue=[],this.AIInternalMessagePrefix="AITR_",this._messageCount=0,this._messageLogged={},this.enableDebugExceptions=function(){return!1},this.consoleLoggingLevel=function(){return 0},this.telemetryLoggingLevel=function(){return 1},this.maxInternalMessageLimit=function(){return 25},V.isNullOrUndefined(e)||(V.isNullOrUndefined(e.loggingLevelConsole)||(this.consoleLoggingLevel=function(){return e.loggingLevelConsole}),V.isNullOrUndefined(e.loggingLevelTelemetry)||(this.telemetryLoggingLevel=function(){return e.loggingLevelTelemetry}),V.isNullOrUndefined(e.maxMessageLimit)||(this.maxInternalMessageLimit=function(){return e.maxMessageLimit}),V.isNullOrUndefined(e.enableDebugExceptions)||(this.enableDebugExceptions=function(){return e.enableDebugExceptions}))}return e.prototype.throwInternal=function(e,t,n,i,r){void 0===r&&(r=!1);var o=new J(t,n,r,i);if(this.enableDebugExceptions())throw o;if(!V.isUndefined(o)&&o&&!V.isUndefined(o.message)){if(r){var s=+o.messageId;!this._messageLogged[s]&&this.consoleLoggingLevel()>=K.WARNING&&(this.warnToConsole(o.message),this._messageLogged[s]=!0)}else this.consoleLoggingLevel()>=K.WARNING&&this.warnToConsole(o.message);this.logInternalMessage(e,o)}},e.prototype.warnToConsole=function(e){!V.isUndefined(console)&&console&&(V.isFunction(console.warn)?console.warn(e):V.isFunction(console.log)&&console.log(e))},e.prototype.resetInternalMessageCount=function(){this._messageCount=0,this._messageLogged={}},e.prototype.logInternalMessage=function(e,t){if(!this._areInternalMessagesThrottled()){var n=!0,i=this.AIInternalMessagePrefix+t.messageId;if(this._messageLogged[i]?n=!1:this._messageLogged[i]=!0,n&&(e<=this.telemetryLoggingLevel()&&(this.queue.push(t),this._messageCount++),this._messageCount===this.maxInternalMessageLimit())){var r="Internal events throttle limit per PageView reached for this app.",o=new J(G.MessageLimitPerPVExceeded,r,!1);this.queue.push(o),this.warnToConsole(r)}}},e.prototype._areInternalMessagesThrottled=function(){return this._messageCount>=this.maxInternalMessageLimit()},e}(),Z=V.isFunction,Y=function(){return function(e,t){var n=this,i=null,r=Z(e.processTelemetry),o=Z(e.setNextPlugin);n._hasRun=!1,n.getPlugin=function(){return e},n.getNext=function(){return i},n.setNext=function(e){i=e},n.processTelemetry=function(s,a){if(a||(a=t),e&&r){n._hasRun=!0;try{a.setNext(i),o&&e.setNextPlugin(i),i&&(i._hasRun=!1),e.processTelemetry(s,a)}catch(t){var u=i&&i._hasRun;i&&u||a.diagLog().throwInternal(K.CRITICAL,G.PluginException,"Plugin ["+e.identifier+"] failed during processTelemetry - "+t),i&&!u&&i.processTelemetry(s,a)}}else i&&(n._hasRun=!0,i.processTelemetry(s,a))}}}(),ee=V.isNullOrUndefined;function te(e,t){var n=[];if(e&&e.length>0)for(var i=null,r=0;r<e.length;r++){var o=e[r];if(o&&V.isFunction(o.processTelemetry)){var s=new Y(o,t);n.push(s),i&&i.setNext(s),i=s}}return n.length>0?n[0]:null}var ne=function(){return function e(t,n,i,r){var o=this,s=null;null!==r&&(t&&V.isFunction(t.getPlugin)?s=function(e,t,n){var i=[],r=!n;if(e)for(;e;){var o=e.getPlugin();(r||o===n)&&(r=!0,i.push(o)),e=e.getNext()}return r||i.push(n),te(i,t)}(t,o,r||t.getPlugin()):r?s=function(e,t,n){var i=e,r=!1;return n&&e&&(i=[],V.arrForEach(e,function(e){(r||e===n)&&(r=!0,i.push(e))})),n&&!r&&(i||(i=[]),i.push(n)),te(i,t)}(t,o,r):V.isUndefined(r)&&(s=te(t,o))),o.core=function(){return i},o.diagLog=function(){var e=(i||{}).logger;return e||(e=new $(n||{})),e},o.getCfg=function(){return n},o.getExtCfg=function(e,t){var i;if(void 0===t&&(t={}),n){var r=n.extensionConfig;r&&e&&(i=r[e])}return i||t},o.getConfig=function(e,t,i){var r;void 0===i&&(i=!1);var s=o.getExtCfg(e,null);return s&&!ee(s[t])?r=s[t]:n&&!ee(n[t])&&(r=n[t]),ee(r)?i:r},o.hasNext=function(){return null!=s},o.getNext=function(){return s},o.setNext=function(e){s=e},o.processNext=function(e){var t=s;t&&(s=t.getNext(),t.processTelemetry(e,o))},o.createNew=function(t,r){return void 0===t&&(t=null),new e(t||s,n,i,r)}}}(),ie=V.isFunction,re="getPlugin",oe=function(){function e(){var e=this,t=!1,n=null,i=null;e.core=null,e.diagLog=function(t){return e._getTelCtx(t).diagLog()},e.isInitialized=function(){return t},e.setInitialized=function(e){t=e},e.setNextPlugin=function(e){i=e},e.processNext=function(e,t){t?t.processNext(e):i&&ie(i.processTelemetry)&&i.processTelemetry(e,null)},e._getTelCtx=function(t){void 0===t&&(t=null);var r=t;if(!r){var o=n||new ne(null,{},e.core);r=i&&i[re]?o.createNew(null,i[re]):o.createNew(null,i)}return r},e._baseTelInit=function(r,o,s,a){r&&(r.extensionConfig=r.extensionConfig||[]),!a&&o&&(a=o.getProcessTelContext().getNext());var u=i;i&&i[re]&&(u=i[re]()),e.core=o,n=new ne(a,r,o,u),t=!0}}return e.prototype.initialize=function(e,t,n,i){this._baseTelInit(e,t,n,i)},e}(),se=V.isFunction,ae="processTelemetry",ue="priority",le="setNextPlugin",ce="isInitialized";function fe(e,t){for(var n=[],i=null,r=e.getNext();r;){var o=r.getPlugin();o&&(i&&se(i[le])&&se(o[ae])&&i[le](o),se(o[ce])&&o[ce]()||n.push(o),i=o,r=r.getNext())}V.arrForEach(n,function(n){n.initialize(e.getCfg(),e.core(),t,e.getNext())})}function he(e){return e.sort(function(e,t){var n=0,i=se(t[ae]);return se(e[ae])?n=i?e[ue]-t[ue]:1:i&&(n=-1),n})}var de=500,pe="Channel has invalid priority",ge=V.arrForEach,_e=V.objDefineAccessors;function ve(e,t){t&&t.length>0&&(function(e){ge(e,function(e){if(e.priority<de)throw Error(pe+e.identifier)})}(t=t.sort(function(e,t){return e.priority-t.priority})),e.push(t))}var me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier="ChannelControllerPlugin",t.priority=de,t}return __extends(t,e),t.prototype.processTelemetry=function(e,t){var n=this;this._channelQueue&&ge(this._channelQueue,function(i){i.length>0&&n._getTelCtx(t).createNew(i).processNext(e)})},t.prototype.getChannelControls=function(){return this._channelQueue},t.prototype.initialize=function(t,n,i){if(!this.isInitialized()){e.prototype.initialize.call(this,t,n,i),t.isCookieUseDisabled&&V.disableCookies();var r=this._channelQueue=function(e,t){var n=[];if(e&&ge(e,function(e){return ve(n,e)}),t){var i=[];ge(t,function(e){e.priority>de&&i.push(e)}),ve(n,i)}return n}((t||{}).channels,i);ge(r,function(e){return fe(new ne(e,t,n),i)})}},t._staticInit=(_e(t.prototype,"ChannelControls",t.prototype.getChannelControls),void _e(t.prototype,"channelQueue",t.prototype.getChannelControls)),t}(oe),ye=V.arrForEach,Ce=V.isNullOrUndefined,Te=function(){function e(){var e=!1;this._extensions=new Array,this._channelController=new me,this.isInitialized=function(){return e},this._setInit=function(t){e=t},this._eventQueue=[]}return e.prototype.initialize=function(e,t,n,i){if(this.isInitialized())throw Error("Core should not be initialized more than once");if(!e||Ce(e.instrumentationKey))throw Error("Please provide instrumentation key");this.config=e;var r=this._channelController;i||(i=V.objCreate({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,t){},eventsSendRequest:function(e,t){}})),this._notificationManager=i,e.extensions=Ce(e.extensions)?[]:e.extensions,(e.extensionConfig=Ce(e.extensionConfig)?{}:e.extensionConfig).NotificationManager=i,n||(n=V.objCreate({throwInternal:function(e,t,n,i,r){void 0===r&&(r=!1)},warnToConsole:function(e){},resetInternalMessageCount:function(){}})),this.logger=n;var o=[];o.push.apply(o,t.concat(e.extensions)),o=he(o);var s=[],a={};if(ye(o,function(e){if(Ce(e)||Ce(e.initialize))throw Error("Extensions must provide callback to initialize");var t=e.priority,i=e.identifier;e&&t&&(Ce(a[t])?a[t]=i:n.warnToConsole("Two extensions have same priority #"+t+" - "+a[t]+", "+i)),(!t||t<r.priority)&&s.push(e)}),o.push(r),s.push(r),o=he(o),this._extensions=o,fe(new ne([r],e,this),o),fe(new ne(s,e,this),o),this._extensions=s,0===this.getTransmissionControls().length)throw new Error("No channels available");this._setInit(!0)},e.prototype.getTransmissionControls=function(){return this._channelController.getChannelControls()},e.prototype.track=function(e){var t=this;e.iKey||(e.iKey=t.config.instrumentationKey),e.time||(e.time=V.toISOString(new Date)),Ce(e.ver)&&(e.ver="4.0"),t.isInitialized()?(t._eventQueue.length>0&&(ye(t._eventQueue,function(e){t.getProcessTelContext().processNext(e)}),t._eventQueue=[]),t.getProcessTelContext().processNext(e)):t._eventQueue.push(e)},e.prototype.getProcessTelContext=function(){var e=this._extensions,t=e;return e&&0!==e.length||(t=[this._channelController]),new ne(t,this.config,this)},e}(),Se=function(){function e(){this.listeners=[]}return e.prototype.addNotificationListener=function(e){this.listeners.push(e)},e.prototype.removeNotificationListener=function(e){for(var t=V.arrIndexOf(this.listeners,e);t>-1;)this.listeners.splice(t,1),t=V.arrIndexOf(this.listeners,e)},e.prototype.eventsSent=function(e){for(var t=this,n=function(n){i.listeners[n].eventsSent&&setTimeout(function(){return t.listeners[n].eventsSent(e)},0)},i=this,r=0;r<this.listeners.length;++r)n(r)},e.prototype.eventsDiscarded=function(e,t){for(var n=this,i=function(i){r.listeners[i].eventsDiscarded&&setTimeout(function(){return n.listeners[i].eventsDiscarded(e,t)},0)},r=this,o=0;o<this.listeners.length;++o)i(o)},e.prototype.eventsSendRequest=function(e,t){for(var n=this,i=function(i){if(r.listeners[i].eventsSendRequest)if(t)setTimeout(function(){return n.listeners[i].eventsSendRequest(e,t)},0);else try{r.listeners[i].eventsSendRequest(e,t)}catch(e){}},r=this,o=0;o<this.listeners.length;++o)i(o)},e}(),xe=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initialize=function(t,n){this._notificationManager=new Se,this.logger=new $(t),this.config=t,e.prototype.initialize.call(this,t,n,this.logger,this._notificationManager)},t.prototype.getTransmissionControls=function(){return e.prototype.getTransmissionControls.call(this)},t.prototype.track=function(t){if(null===t)throw this._notifyInvalidEvent(t),Error("Invalid telemetry item");this._validateTelemetryItem(t),e.prototype.track.call(this,t)},t.prototype.addNotificationListener=function(e){this._notificationManager&&this._notificationManager.addNotificationListener(e)},t.prototype.removeNotificationListener=function(e){this._notificationManager&&this._notificationManager.removeNotificationListener(e)},t.prototype.pollInternalLogs=function(e){var t=this,n=this.config.diagnosticLogInterval;return n&&n>0||(n=1e4),setInterval(function(){var n=t,i=n.logger?n.logger.queue:[];V.arrForEach(i,function(t){var i={name:e||"InternalMessageId: "+t.messageId,iKey:n.config.instrumentationKey,time:V.toISOString(new Date),baseType:J.dataType,baseData:{message:t.message}};n.track(i)}),i.length=0},n)},t.prototype._validateTelemetryItem=function(e){if(V.isNullOrUndefined(e.name))throw this._notifyInvalidEvent(e),Error("telemetry name required")},t.prototype._notifyInvalidEvent=function(e){this._notificationManager&&this._notificationManager.eventsDiscarded([e],p)},t}(Te),be={Normal:1,CostDeferred:2,RealTime:3},we=__assign({},G,{AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517}),Ee="1DS-Web-JS-2.3.4",Ie="undefined",Me="object",Oe=Ie,Re={Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9},Pe=null;function ke(e,t){return typeof e===t}function Ae(e){return void 0===e||ke(e,Oe)}function Le(e){return Ae(e)||null===e}function Ne(e){return!Ae(e)}var Fe,Be=null,Qe=V.arrForEach,qe=V.objKeys;function De(e){return He(e)?e.replace(/^\s+|\s+$/g,""):e}var ze=Boolean(M()),Ue=Boolean(I());function je(e){return!(Le(e)||""===e)}function He(e){return ke(e,"string")}function Ke(e){return ke(e,"number")}function Ve(e){return ke(e,"boolean")}function We(e,t,n){if(!He(e)||Le(t)||""===t)return null;if(He(t)||Ke(t)||Ve(t)||Ge(t))t={value:t};else if("object"!=typeof t||t.hasOwnProperty("value")){if(Le(t.value)||""===t.value||!He(t.value)&&!Ke(t.value)&&!Ve(t.value)&&!Ge(t.value))return null}else t={value:n?JSON.stringify(t):t};if(Ge(t.value)&&!(t.value.length>0))return null;if(Ne(t.kind)){if(Ge(t.value)||!function(e){if(e&&Ke(e)&&(e>=0&&e<=13||32===e))return!0;return!1}(t.kind))return null;t.value=t.value.toString()}return t}function Xe(){var e=R();return!(!e||!e.product)&&"ReactNative"===e.product}function Ge(e){return e instanceof Array}function Je(e,t,n){var i=-1;return Ae(e)?i:(t&&t>0&&(32===t?i=1<<13:t<=13&&(i=t<<5)),Ne(n)&&function(e){if(Ke(e)&&e>=0&&e<=9)return!0;return!1}(n)?(-1===i&&(i=0),i|n):(Ge(e)&&(e=e[0]),-1!==i?i|function(e){if(Ae(e))return-1;if(Ke(e))return Re.Double;if(He(e))return Re.String;if(Ve(e))return Re.Bool;return-1}(e):Ke(e)?Re.Double:i))}function $e(e,t,n){if(function(){if(void 0===Fe){Fe=!1;try{var e=M(),t=R();e&&!Ae(e.cookie)&&t&&t.cookieEnabled&&(Fe=!0)}catch(e){}}return Fe}()){var i="",r=lt();r&&"https:"===r.protocol&&(i=";secure",null===Pe&&(Pe=function(e){return!!He(e)&&(-1!==e.indexOf("CPU iPhone OS 12")||-1!==e.indexOf("iPad; CPU OS 12")||-1!==e.indexOf("Macintosh; Intel Mac OS X 10_14")&&-1!==e.indexOf("Version/")&&-1!==e.indexOf("Safari")||-1!==e.indexOf("Macintosh; Intel Mac OS X 10_14")&&(n="AppleWebKit/605.1.15 (KHTML, like Gecko)",i=(t=e).length,r=i-n.length,t.substring(r>=0?r:0,i)===n)||-1!==e.indexOf("Chrome/5")||-1!==e.indexOf("Chrome/6")||-1!==e.indexOf("UnrealEngine")&&-1===e.indexOf("Chrome")||-1!==e.indexOf("UCBrowser/12")||-1!==e.indexOf("UCBrowser/11"));var t,n,i,r}((R()||{}).userAgent)),Pe||(t+=";SameSite=None"));var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var s="; expires="+o.toUTCString();M().cookie=e+"="+t+s+"; path=/"+i}}function Ze(){var e=ut(st);return e?e.now():(new Date).getTime()}var Ye="on",et="attachEvent",tt="addEventListener";function nt(e,t){var n=!1;if(Ue){var i=window;n=rt.Attach(i,e,t),n=rt.Attach(i.body,e,t)||n}return ze&&(n=rt.Attach(document,e,t)||n),n}function it(e,t,n,i){void 0===i&&(i=!1);var r=!1;if(!Le(e))try{Le(e[tt])?Le(e[et])||(e[et](Ye+t,n),r=!0):(e[tt](t,n,i),r=!0)}catch(e){}return r}var rt=function(){function e(){}return e.Attach=it,e}(),ot="window",st="performance",at="location";function ut(e){var t=typeof globalThis!==Ie&&globalThis?globalThis:typeof self!==Ie&&self?self:typeof window!==Ie&&window?window:typeof global!==Ie&&global?global:null;return t&&t[e]?t[e]:e===ot&&E()?window:null}function lt(){return typeof location===Me&&location?location:ut(at)}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pluginVersionStringArr=[],t.pluginVersionString="",t}__extends(t,e),t.prototype.initialize=function(t,n){if(t){t.endpointUrl||(t.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var i=t.propertyStorageOverride;if(i&&(!i.getProperty||!i.setProperty))throw"Invalid property storage override passed.";if(t.channels)for(var r=0;r<t.channels.length;r++)if(t.channels[r])for(var o=0;o<t.channels[r].length;o++){var s=t.channels[r][o];if(s.identifier&&s.version){var a=s.identifier+"="+s.version;this.pluginVersionStringArr.push(a)}}}if(this.getWParam=function(){return"undefined"!=typeof document?0:-1},n)for(r=0;r<n.length;r++){var u=n[r];if(u.identifier&&u.version){a=u.identifier+"="+u.version;this.pluginVersionStringArr.push(a)}}this.pluginVersionString=this.pluginVersionStringArr.join(";");try{e.prototype.initialize.call(this,t,n)}catch(e){this.logger.throwInternal(K.CRITICAL,we.ErrorProvidedChannels,"Channels must be provided through config.channels only")}this.pollInternalLogs("InternalLog")},t.prototype.track=function(t){var n,i=t;if(i){i.timings=i.timings||{},i.timings.trackStart=Ze(),(n=i.latency)&&Ke(n)&&n>=1&&n<=3||(i.latency=be.Normal);var r=i.ext=i.ext||{};r.sdk=r.sdk||{},r.sdk.ver=Ee;var o=i.baseData=i.baseData||{};o.properties||(o.properties={});var s=o.properties;s.version||(s.version=""),""!=this.pluginVersionString&&(s.version=this.pluginVersionString)}e.prototype.track.call(this,i)}})(xe),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}__extends(t,e),t.prototype.initialize=function(t,n){t&&(t.endpointUrl||(t.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/")),this.getWParam=function(){return ze?0:-1};try{e.prototype.initialize.call(this,t,n)}catch(e){this.logger.throwInternal(K.CRITICAL,we.ErrorProvidedChannels,"Channels must be provided through config.channels only")}},t.prototype.track=function(t){var n=t;n&&(n.ext=n.ext||{},n.ext.sdk=n.ext.sdk||{},n.ext.sdk.ver=Ee),e.prototype.track.call(this,n)}}(Te);var ct="constructor",ft="prototype",ht="function",dt="_dynInstFuncs",pt="_isDynProxy",gt="_dynClass",_t="_dynCls$",vt="_unknown_",mt="__proto__",yt=Object.getPrototypeOf,Ct=0;function Tt(e,t){return e&&Object[ft].hasOwnProperty.call(e,t)}function St(e){return typeof e===ht}function xt(e){return e&&(e===Object[ft]||e===Array[ft])}function bt(e){return xt(e)||e===Function[ft]}function wt(e){if(e){if(yt)return yt(e);var t=e[mt]||e[ft]||e[ct];if(t)return t}return null}function Et(e,t,n){return t!==ct&&St(e[t])&&(n||Tt(e,t))}function It(e){throw new TypeError("DynamicProto: "+e)}function Mt(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function Ot(e,t){return Tt(e,ft)?e.name||t||vt:((e||{})[ct]||{}).name||t||vt}function Rt(e,t,n){Tt(e,ft)||It("theClass is an invalid class definition.");var i=e[ft];(function(e,t){for(var n=wt(t);n&&!bt(n);){if(n===e)return!0;n=wt(n)}return!1})(i,t)||It("["+Ot(e)+"] is not in class heirarchy of ["+Ot(t)+"]");var r=null;Tt(i,gt)?r=i[gt]:(r=_t+Ot(e,"_")+"$"+Ct,Ct++,i[gt]=r);var o=function(e){var t={};for(var n in e)!t[n]&&Et(e,n,!1)&&(t[n]=e[n]);return t}(t);n(t,function(e,t,n){function i(e,t){return function(){return t.apply(e,arguments)}}var r={};for(var o in n)r[o]=i(t,n[o]);for(var s=wt(e),a=[];s&&!bt(s)&&!Mt(a,s);){for(var o in s)!r[o]&&Et(s,o,!yt)&&(r[o]=i(t,s[o]));a.push(s),s=wt(s)}return r}(i,t,o)),function(e,t,n,i){function r(e,t){var n=function(){if(this&&Tt(e,gt)){var i=((this[dt]||{})[e[gt]]||{})[t];if(i)return i.apply(this,arguments);It("Missing ["+t+"] "+ht)}var r=e[t];return r===n&&(r=wt(e)[t]),St(r)||It("["+t+"] is not a "+ht),r.apply(this,arguments)};return n[pt]=1,n}if(!xt(e)){var o=n[dt]=n[dt]||{},s=o[t]=o[t]||{};for(var a in n)Et(n,a,!1)&&n[a]!==i[a]&&(s[a]=n[a],delete n[a],(!Tt(e,a)||e[a]&&!e[a][pt])&&(e[a]=r(e,a)))}}(i,r,t,o)}var Pt="REAL_TIME",kt=function(){function e(){}return e.getPayloadBlob=function(e,t){var n="",i={};for(var r in e)if(e.hasOwnProperty(r))for(var o=0;o<e[r].length;++o){n&&(n+="\n");var s=n.length;if((n+=this.getEventBlob(e[r][o])).length-s>2e6&&(t&&t.eventsDiscarded([e[r][o]],g),delete e[r][o],n=n.substring(0,s)),n.length>3984588){i={};var a=e[r];e[r]=a.splice(0,o),i[r]=a;break}}return{payloadBlob:n,remainingRequest:i}},e.getEventBlob=function(e){var t={};if(t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+function(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return""}(e.iKey),e.ext)for(var n in t.ext={},e.ext)if(e.ext.hasOwnProperty(n))for(var i in t.ext[n]={},e.ext[n])e.ext[n].hasOwnProperty(i)&&e.ext[n][i]&&(t.ext[n][i]=We(i,e.ext[n][i]).value);if(t.data={},t.data.baseData={},t.data.baseType=e.baseType,e.baseData)for(var n in e.baseData)if(e.baseData.hasOwnProperty(n)){var r=We(n,e.baseData[n]);At(t.data.baseData,n,r),Lt(t.ext,"baseData."+n,r)}if(e.data)for(var n in e.data)if(e.data.hasOwnProperty(n)){r=We(n,e.data[n]);At(t.data,n,r),Lt(t.ext,n,r)}return JSON.stringify(t)},e}();function At(e,t,n){if(n){for(var i=e,r=t.split("."),o=0;o<r.length-1;++o)i[r[o]]||(i[r[o]]={}),i=i[r[o]];i[r[r.length-1]]=n.value}}function Lt(e,t,n){if(n){var i=Je(n.value,n.kind,n.propertyType);if(i>-1){var r=e;r.metadata||(r.metadata={}),r.metadata.f||(r.metadata.f={}),r=r.metadata.f;for(var o=t.split("."),s=0;s<o.length-1;++s)r[o[s]]||(r[o[s]]={f:{}}),r=r[o[s]].f;Ge(n.value)?r[o[o.length-1]]={a:{t:i}}:r[o[o.length-1]]={t:i}}}}var Nt=function(){function e(){}return e.shouldRetryForStatus=function(e){return!(e>=300&&e<500&&408!==e&&429!==e||501===e||505===e)},e.getMillisToBackoffForRetry=function(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*n,Math.min(t,6e5)},e}(),Ft=1e3,Bt=function(){return function e(){var t={};Rt(e,this,function(e){e.setKillSwitchTenants=function(e,n){if(e&&n)try{var i=(s=e.split(","),a=[],s&&Qe(s,function(e){a.push(De(e))}),a);if("this-request-only"===n)return i;for(var r=parseInt(n,10)*Ft,o=0;o<i.length;++o)t[i[o]]=Date.now()+r}catch(e){return[]}var s,a;return[]},e.isTenantKilled=function(e){var n=t,i=De(e);return void 0!==n[i]&&n[i]>Date.now()||(delete n[i],!1)}})}}(),Qt=function(){return function e(){var t=!0,n=!0,i=!0,r="use-collector-delta",o=!1;Rt(e,this,function(e){e.allowRequestSending=function(){return i&&!o?(i=!1,t=!1,!0):t},e.shouldAddClockSkewHeaders=function(){return n},e.getClockSkewHeaderValue=function(){return r},e.setClockSkew=function(e){o||(e?r=e:n=!1,o=!0,t=!0)}})}}();function qt(e){try{return e.responseText}catch(e){}return""}var Dt=function(){function e(e){this._requestQueue=e,this._urlString="?cors=true&content-type=application/x-json-stream&client-id=NO_AUTH&client-version="+Ee,this._killSwitch=new Bt,this._paused=!1,this._clockSkewManager=new Qt,this._useBeacons=!1,this._activeConnections=0,this._customHttpInterface=!0,this._queryStringParameters=[],this._headers={}}return e.prototype.initialize=function(e,t,n,i){var r=this;if(this._urlString=e+this._urlString,this._core=t,this._postManager=n,this._httpInterface=i,!this._httpInterface){var o=!0,s=lt();s&&s.protocol&&"file:"===s.protocol.toLowerCase()&&(o=!1),this._customHttpInterface=!1,this._useBeacons=!Xe(),this._httpInterface={sendPOST:function(e,t,n){if(function(){if(Ne(XMLHttpRequest)){var e=new XMLHttpRequest;return Boolean(Ae(e.withCredentials)&&Ne(XDomainRequest))}}()){var i=new XDomainRequest;i.open("POST",e.urlString),i.onload=function(){t(200,{},qt(i)),r._handleCollectorResponse(qt(i))},i.onerror=function(){t(400,{})},i.ontimeout=function(){t(500,{})},i.send(e.data)}else if(Xe())try{fetch(e.urlString,(a={body:e.data,method:"POST",credentials:"include"},a.Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,a.headers=e.headers,a)).then(function(e){var n={},i="";e.headers&&e.headers.forEach(function(e,t){n[t]=e}),e.body&&e.text().then(function(e){i=e}),t(e.status,n,i),r._handleCollectorResponse(i)}).catch(function(e){t(0,{})})}catch(e){t(0,{})}else if("undefined"!=typeof XMLHttpRequest){var s=new XMLHttpRequest;try{s.Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0}catch(e){}s.open("POST",e.urlString,!n),o&&(s.withCredentials=!0),Qe(qe(e.headers),function(t){s.setRequestHeader(t,e.headers[t])}),s.onload=function(){t(s.status,r._convertAllHeadersToMap(s.getAllResponseHeaders()),qt(s)),r._handleCollectorResponse(qt(s))},s.onerror=function(){t(s.status,r._convertAllHeadersToMap(s.getAllResponseHeaders()))},s.ontimeout=function(){t(s.status,r._convertAllHeadersToMap(s.getAllResponseHeaders()))},s.send(e.data)}var a}}}},e.prototype.addQueryStringParameter=function(e,t){for(var n=0;n<this._queryStringParameters.length;n++)if(this._queryStringParameters[n].name===e)return void(this._queryStringParameters[n].value=t);this._queryStringParameters.push({name:e,value:t})},e.prototype.addHeader=function(e,t){this._headers[e]=t},e.prototype.hasIdleConnection=function(){return this._activeConnections<2},e.prototype.sendQueuedRequests=function(e,t){for(var n=!1;this.hasIdleConnection()&&!this._paused&&this._requestQueue.length>0&&this._clockSkewManager.allowRequestSending();)n||(this._notifyEventsSendRequest(e||0,t),n=!0),this._activeConnections++,this._sendRequest(this._requestQueue.shift(),0,!1);this.hasIdleConnection()&&this._postManager._scheduleTimer()},e.prototype.isCompletelyIdle=function(){return 0===this._activeConnections},e.prototype.teardown=function(){if(this._requestQueue.length>0)for(this._notifyEventsSendRequest(2,!0);this._requestQueue.length>0;)this._sendRequest(this._requestQueue.shift(),0,!0)},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1,this.sendQueuedRequests(4,!1)},e.prototype.removeQueuedRequests=function(){this._requestQueue.length=0},e.prototype.sendSynchronousRequest=function(e,t){this._activeConnections++,this._notifyEventsSendRequest(t||0,!0),this._sendRequest(e,0,!1,!0)},e.prototype._sendRequest=function(e,t,n,i){void 0===i&&(i=!1);var r=this;if(e){if(r._paused)return r._activeConnections--,void r._postManager._addBackRequest(e);var o=0,s="";for(var a in e)e.hasOwnProperty(a)&&(r._killSwitch.isTenantKilled(a)?(r._postManager._notificationManager&&r._postManager._notificationManager.eventsDiscarded(e[a],_),delete e[a]):(s.length>0&&(s+=","),s+=a,o++));if(o>0){var u=Ze(),l=kt.getPayloadBlob(e,r._postManager._notificationManager),c=Ze();l.remainingRequest&&r._requestQueue.push(l.remainingRequest);var f=r._urlString+"&apikey="+s+"&upload-time="+Date.now().toString(),h=r._getMsfpc(e);if(je(h)&&(f=f+"&ext.intweb.msfpc="+h),r._clockSkewManager.shouldAddClockSkewHeaders()&&(f=f+"&time-delta-to-apply-millis="+r._clockSkewManager.getClockSkewHeaderValue()),r._core.getWParam){var d=r._core.getWParam();d>=0&&(f=f+"&w="+d)}for(var p=0;p<r._queryStringParameters.length;p++)f=f+"&"+r._queryStringParameters[p].name+"="+r._queryStringParameters[p].value;var g=Ze();for(var a in e)if(e.hasOwnProperty(a))for(p=0;p<e[a].length;++p){var v=e[a][p];v.timings=v.timings||{},v.timings.sendEventStart=v.timings.sendEventStart||{},v.timings.serializationStart=v.timings.serializationStart||{},v.timings.serializationCompleted=v.timings.serializationCompleted||{},v.timings.sendEventStart[r._postManager.identifier]=g,v.timings.serializationStart[r._postManager.identifier]=u,v.timings.serializationCompleted[r._postManager.identifier]=c,v.sendAttempt>0?v.sendAttempt++:v.sendAttempt=1}var m={data:l.payloadBlob,urlString:f,headers:r._headers},y=null,C=!!r.sendHook;!r._customHttpInterface&&r._useBeacons&&(null===Be&&(Be=O()&&Boolean(R().sendBeacon)),Be)&&n?(C=!1,y=function(t){r._sendUsingBeacons(m,e),r.sendListener&&r.sendListener(m,m,i||n,!0)}):r._httpInterface&&(y=function(a){r._httpInterface.sendPOST(a,function(a,u){r._retryRequestIfNeeded(a,u,e,o,s,t,n,i)},n||i),r.sendListener&&r.sendListener(m,a,i||n,!1)}),y&&(C?r.sendHook(m,y,i||n):y(m))}else n||r._handleRequestFinished(null,{},n,i)}},e.prototype._sendUsingBeacons=function(e,t){try{if(navigator.sendBeacon(e.urlString,e.data))return void this._handleRequestFinished(!0,t,!0,!0);for(var n in t)if(t.hasOwnProperty(n))for(var i=0;i<t[n].length;++i){if(!navigator.sendBeacon(e.urlString,kt.getEventBlob(t[n][i])))return;this._notifyEventCompleted(!0,[t[n][i]])}}catch(e){this._postManager.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+e)}},e.prototype._addEventCompletedTimings=function(e){for(var t=Ze(),n=0;n<e.length;++n)e[n].timings=e[n].timings||{},e[n].timings.sendEventCompleted=e[n].timings.sendEventCompleted||{},e[n].timings.sendEventCompleted[this._postManager.identifier]=t},e.prototype._retryRequestIfNeeded=function(e,t,n,i,r,o,s,a){var u=this,l=!0;if(void 0!==e){if(t){var c=this._killSwitch.setKillSwitchTenants(t["kill-tokens"],t["kill-duration-seconds"]);this._clockSkewManager.setClockSkew(t["time-delta-millis"]);for(var f=0;f<c.length;++f)this._postManager._notificationManager&&this._postManager._notificationManager.eventsDiscarded(n[c[f]],_),delete n[c[f]],i--}else this._clockSkewManager.setClockSkew("");if(200===e)return void this._handleRequestFinished(!0,n,s,a);(!Nt.shouldRetryForStatus(e)||i<=0)&&(l=!1)}l?a?(this._activeConnections--,this._postManager._addBackRequest(n)):o<1?this._postManager._setTimeoutOverride(function(){return u._sendRequest(n,o+1,!1)},Nt.getMillisToBackoffForRetry(o)):(this._activeConnections--,this._postManager._backOffTransmission(),this._postManager._addBackRequest(n)):this._handleRequestFinished(!1,n,s,a)},e.prototype._handleRequestFinished=function(e,t,n,i){for(var r in e&&this._postManager._clearBackOff(),t)t.hasOwnProperty(r)&&this._notifyEventCompleted(e,t[r],d);this._activeConnections--,i||n||this.sendQueuedRequests()},e.prototype._notifyEventCompleted=function(e,t,n){this._addEventCompletedTimings(t);var i=this._postManager._notificationManager;i&&(e?i.eventsSent(t):i.eventsDiscarded(t,n))},e.prototype._notifyEventsSendRequest=function(e,t){var n=this._postManager._notificationManager;if(n&&n.eventsSendRequest)try{n.eventsSendRequest(e,!!t)}catch(e){this._postManager.diagLog().throwInternal(K.CRITICAL,we.NotificationException,"send request notification failed: "+e)}},e.prototype._convertAllHeadersToMap=function(e){var t={};if(He(e))for(var n=e.split("\n"),i=0;i<n.length;++i){var r=n[i].split(": ");t[r[0]]=r[1]}return t},e.prototype._getMsfpc=function(e){for(var t in e)if(e.hasOwnProperty(t))for(var n=0;n<e[t].length;++n)if(e[t][n].ext&&e[t][n].ext.intweb&&je(e[t][n].ext.intweb.msfpc))return encodeURIComponent(e[t][n].ext.intweb.msfpc);return""},e.prototype._handleCollectorResponse=function(e){try{if(e){var t=JSON.parse(e);je(t.webResult)&&je(t.webResult.msfpc)&&$e("MSFPC",t.webResult.msfpc,365)}}catch(e){}},e}(),zt=function(){return function e(t,n){var i={},r=0;Rt(e,this,function(e){e.addEventToBatch=function(t){var o=t.iKey;if(o){if(t.sync){var s={};return s[o]=[t],s}r>=n&&e.flushBatch();var a=i;void 0===a[o]&&(a[o]=[]),a[o].push(t),r++}return null},e.flushBatch=function(){r>0&&(t.push(i),i={},r=0)},e.hasBatch=function(){return r>0}})}}(),Ut=500,jt=Ue?window:void 0,Ht=function(e){function t(){var t=e.call(this)||this;return t.identifier="PostChannel",t.priority=1011,t.version="2.3.4",t._isTeardownCalled=!1,t._isCurrentlyFlushingNow=!1,t._flushQueue=[],t._databaseAdded=!1,t._paused=!1,t._queueSize=0,t._queueSizeLimit=1e4,t._profiles={},t._currentProfile=Pt,t._timeout=null,t._currentBackoffCount=0,t._timerCount=0,t._flushCallback=-1,t._flushOutboundQueue=[],t._outboundQueue=[],t._inboundQueues={},t._inboundQueues[be.RealTime]=[],t._inboundQueues[be.CostDeferred]=[],t._inboundQueues[be.Normal]=[],t._initializeProfiles(),t._addEmptyQueues(),t._batcher=new zt(t._outboundQueue,Ut),t._syncFlushBatcher=new zt(t._flushOutboundQueue,Ut),t._httpManager=new Dt(t._outboundQueue),t}return __extends(t,e),t.prototype.initialize=function(t,n,i){var r=this,o=n;e.prototype.initialize.call(this,t,n,i),this.setInitialized(!1);var s=this._getTelCtx();t.extensionConfig[this.identifier]=t.extensionConfig[this.identifier]||{},this._config=s.getExtCfg(this.identifier),this._setTimeoutOverride=this._config.setTimeoutOverride?this._config.setTimeoutOverride:setTimeout.bind(jt),this._clearTimeoutOverride=this._config.clearTimeoutOverride?this._config.clearTimeoutOverride:clearTimeout.bind(jt);var a=o.getWParam;o.getWParam=function(){var e=0;return r._config.ignoreMc1Ms0CookieProcessing&&(e|=2),e|a()},this._config.eventsLimitInMem>0&&(this._queueSizeLimit=this._config.eventsLimitInMem),this._config.autoFlushEventsLimit>0&&(this._autoFlushEventsLimit=this._config.autoFlushEventsLimit),this._config.httpXHROverride&&this._config.httpXHROverride.sendPOST&&(this._xhrOverride=this._config.httpXHROverride),je(t.anonCookieName)&&this._httpManager.addQueryStringParameter("anoncknm",t.anonCookieName),this._httpManager.sendHook=this._config.payloadPreprocessor,this._httpManager.sendListener=this._config.payloadListener;var u,l,c=this._config.overrideEndpointUrl?this._config.overrideEndpointUrl:t.endpointUrl;this._notificationManager=t.extensionConfig.NotificationManager,this._httpManager.initialize(c,this.core,this,this._xhrOverride);for(var f=0;f<i.length;++f)i[f].identifier&&"LocalStorage"===i[f].identifier&&(this._databaseAdded=!0);l=nt("beforeunload",u=function(){r.releaseAllQueuesUsingBeacons()}),l=nt("unload",u)||l,l=nt("pagehide",u)||l,this.setInitialized(!0)},t.prototype.processTelemetry=function(e,t){!function(e,t){var n=e;n.timings=n.timings||{},n.timings.processTelemetryStart=n.timings.processTelemetryStart||{},n.timings.processTelemetryStart[t]=Ze()}(e,this.identifier);var n=(t=this._getTelCtx(t)).getExtCfg(this.identifier),i=!!this._config.disableTelemetry;n&&(i=i||!!this._config.disableTelemetry);var r=e;if(!i&&!this._isTeardownCalled){if(this._config.overrideInstrumentationKey&&(r.iKey=this._config.overrideInstrumentationKey),n&&n.overrideInstrumentationKey&&(r.iKey=n.overrideInstrumentationKey),r.sendAttempt||(r.sendAttempt=0),r.latency||(r.latency=be.Normal),r.ext&&r.ext.trace&&delete r.ext.trace,r.ext&&r.ext.user&&r.ext.user.id&&delete r.ext.user.id,r.sync)if(this._currentBackoffCount>0||this._paused)r.latency=be.RealTime,r.sync=!1;else if(this._httpManager)return void this._httpManager.sendSynchronousRequest(this._batcher.addEventToBatch(r),3);this._queueSize<this._queueSizeLimit?this._addEventToProperQueue(r):this._dropEventWithLatencyOrLess(r.latency)?this._addEventToProperQueue(r):this._notifyEventsDiscarded([r],v),this._scheduleTimer()}this.processNext(r,t)},t.prototype.setEventQueueLimits=function(e,t){var n=!1;this._queueSizeLimit=e>0?e:1e4,this._queueSize<e&&(n=!0),this._autoFlushEventsLimit=t>0?t:0,t>0&&this._queueSize<t&&(n=!0),n&&this.flush(!1,null,20)},t.prototype.teardown=function(){this.releaseAllQueuesUsingBeacons(),this._isTeardownCalled=!0},t.prototype.pause=function(){this._clearTimeout(),this._paused=!0,this._httpManager.pause(),this._databaseAdded&&(this._queueSize-=this._inboundQueues[be.RealTime][0].length+this._inboundQueues[be.CostDeferred][0].length+this._inboundQueues[be.Normal][0].length,this._inboundQueues[be.RealTime][0]=[],this._inboundQueues[be.CostDeferred][0]=[],this._inboundQueues[be.Normal][0]=[],this._httpManager.removeQueuedRequests())},t.prototype.resume=function(){this._paused=!1,this._httpManager.resume(),this._scheduleTimer()},t.prototype._loadTransmitProfiles=function(e){for(var t in this._resetTransmitProfiles(),e)if(e.hasOwnProperty(t)){if(e[t].length<2)continue;if(e[t].splice(0,e[t].length-2),e[t][1]<0&&(e[t][0]=-1),e[t][1]>0&&e[t][0]>0){var n=e[t][0]/e[t][1];e[t][0]=Math.ceil(n)*e[t][1]}this._profiles[t]=e[t]}},t.prototype.flush=function(e,t,n){var i=this;if(void 0===e&&(e=!0),!this._paused)if(this._clearTimeout(),e)this._addEmptyQueues(),this._isCurrentlyFlushingNow?this._flushQueue.push(t):(this._isCurrentlyFlushingNow=!0,this._setTimeoutOverride(function(){return i._flushImpl(t,n||1,e)},0));else{this._batchEvents(be.Normal,this._syncFlushBatcher);for(var r=0;r<this._flushOutboundQueue.length;r++)this._httpManager.sendSynchronousRequest(this._flushOutboundQueue[r],n||1);null!=t&&t()}},t.prototype.setMsaAuthTicket=function(e){this._httpManager.addHeader("X-AuthMsaDeviceTicket",e)},t.prototype._setTransmitProfile=function(e){this._currentProfile!==e&&void 0!==this._profiles[e]&&(this._clearTimeout(),this._currentProfile=e,this._scheduleTimer())},t.prototype._sendEventsForLatencyAndAbove=function(e,t,n){this._batchEvents(e),this._httpManager.sendQueuedRequests(t,n)},t.prototype._hasEvents=function(){return(this._inboundQueues[be.RealTime][0].length>0||this._inboundQueues[be.CostDeferred][0].length>0||this._inboundQueues[be.Normal][0].length>0||this._batcher.hasBatch())&&this._httpManager.hasIdleConnection()},t.prototype._addBackRequest=function(e){if(!this._paused||!this._databaseAdded)for(var t in e)if(e.hasOwnProperty(t)){1===e[t].length&&e[t][0].sync&&(e[t][0].latency=be.RealTime,e[t][0].sync=!1);for(var n=0;n<e[t].length;++n)e[t][n].sendAttempt<6?this.processTelemetry(e[t][n]):this._notifyEventsDiscarded([e[t][n]],d)}},t.prototype._scheduleTimer=function(){var e=this,t=this._profiles[this._currentProfile][1];if(!this._timeout&&t>=0&&!this._paused)if(this._hasEvents()){0===t&&this._currentBackoffCount>0&&(t=1);var n=1e3;this._currentBackoffCount>0&&(n=Nt.getMillisToBackoffForRetry(this._currentBackoffCount-1)),this._timeout=this._setTimeoutOverride(function(){return e._batchAndSendEvents(1,!1)},t*n)}else this._timerCount=0},t.prototype._backOffTransmission=function(){this._currentBackoffCount<4&&(this._currentBackoffCount++,this._clearTimeout(),this._scheduleTimer())},t.prototype._clearBackOff=function(){this._currentBackoffCount>0&&(this._currentBackoffCount=0,this._clearTimeout(),this._scheduleTimer())},t.prototype._clearTimeout=function(){this._timeout&&(this._clearTimeoutOverride(this._timeout),this._timeout=null,this._timerCount=0)},t.prototype._batchAndSendEvents=function(e,t){var n=be.RealTime;this._timerCount++,2===this._timerCount&&(n=be.Normal,this._timerCount=0),this._sendEventsForLatencyAndAbove(n,e,t),this._timeout=null,this._scheduleTimer()},t.prototype.releaseAllQueuesUsingBeacons=function(){this._clearTimeout(),this._flushCallback>0&&this._clearTimeoutOverride(this._flushCallback),this._paused||this._databaseAdded||(this._mergeQueues(),this._batchEvents(be.Normal),this._httpManager.teardown())},t.prototype._removeFirstQueues=function(){this._inboundQueues[be.RealTime].shift(),this._inboundQueues[be.CostDeferred].shift(),this._inboundQueues[be.Normal].shift()},t.prototype._addEmptyQueues=function(){this._inboundQueues[be.RealTime].push([]),this._inboundQueues[be.CostDeferred].push([]),this._inboundQueues[be.Normal].push([])},t.prototype._mergeQueues=function(){for(var e=be.Normal;e<=be.RealTime;e++)for(var t=1;t<this._inboundQueues[e].length;t++)for(;this._inboundQueues[e][t].length>0;)this._inboundQueues[e][0].push(this._inboundQueues[e][t].pop())},t.prototype._addEventToProperQueue=function(e){this._paused&&this._databaseAdded||(this._queueSize++,this._inboundQueues[e.latency][this._inboundQueues[e.latency].length-1].push(e),0===e.sendAttempt&&this._autoFlushEventsLimit>0&&this._queueSize>this._autoFlushEventsLimit&&this.flush(!1,null,20))},t.prototype._dropEventWithLatencyOrLess=function(e){for(var t=be.Normal;t<=e;){if(this._inboundQueues[t][this._inboundQueues[t].length-1].length>0){var n=this._inboundQueues[t][this._inboundQueues[t].length-1].splice(0,20);return this._notifyEventsDiscarded(n,v),!0}t++}return!1},t.prototype._batchEvents=function(e,t){void 0===t&&(t=this._batcher);for(var n=be.RealTime;n>=e;){for(;this._inboundQueues[n][0].length>0;){var i=this._inboundQueues[n][0].pop();this._queueSize--,t.addEventToBatch(i)}n--}t.flushBatch()},t.prototype._flushImpl=function(e,t,n){var i=this;this._hasEvents()&&this._sendEventsForLatencyAndAbove(be.Normal,t,n),this._checkOutboundQueueEmptyAndSent(function(){i._removeFirstQueues(),null!=e&&e(),i._flushQueue.length>0?i._flushCallback=i._setTimeoutOverride(function(){return i._flushImpl(i._flushQueue.shift(),t,n)},0):(i._isCurrentlyFlushingNow=!1,i._hasEvents()&&i._scheduleTimer())})},t.prototype._checkOutboundQueueEmptyAndSent=function(e){var t=this;this._httpManager.isCompletelyIdle()?e():this._flushCallback=this._setTimeoutOverride(function(){return t._checkOutboundQueueEmptyAndSent(e)},250)},t.prototype._notifyEventsDiscarded=function(e,t){var n=this._notificationManager;n&&n.eventsDiscarded&&n.eventsDiscarded(e,t)},t.prototype._resetTransmitProfiles=function(){this._clearTimeout(),this._initializeProfiles(),this._currentProfile=Pt,this._scheduleTimer()},t.prototype._initializeProfiles=function(){this._profiles={},this._profiles[Pt]=[2,1],this._profiles.NEAR_REAL_TIME=[6,3],this._profiles.BEST_EFFORT=[18,9]},t}(oe);e.PostChannel=Ht,e.Serializer=kt,e.BE_PROFILE="BEST_EFFORT",e.NRT_PROFILE="NEAR_REAL_TIME",e.RT_PROFILE=Pt,e.HttpManager=Dt,e.RecordBatcher=zt,e.RetryPolicy=Nt,e.ClockSkewManager=Qt,e.KillSwitch=Bt,function(e,t,n){var i=Object.defineProperty;if(i)try{return i(e,"__esModule",n)}catch(e){}n&&void 0!==typeof n.value&&(e.__esModule=n.value)}(e,0,{value:!0})});
//# sourceMappingURL=ms.post-2.3.4.min.js.map
