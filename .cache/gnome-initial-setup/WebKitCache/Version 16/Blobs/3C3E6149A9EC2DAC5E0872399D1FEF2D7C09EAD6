!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t){var n=$PageHelper.get(document.body),o=n.css("backgroundColor").toLowerCase().replace(new RegExp(" ","g"),"");return!t.forBlackBackground||"rgb(0,0,0)"!==o&&"#000000"!==o&&"#000"!==o?!t.forWhiteBackground||"rgb(255,255,255)"!==o&&"#ffffff"!==o&&"#fff"!==o?e:t.forWhiteBackground:t.forBlackBackground}function n(e,t){return e?t&&t.length>6&&("data:"===t.substr(0,5).toLowerCase()||"http:"===t.substr(0,5).toLowerCase()||"https:"===t.substr(0,6).toLowerCase())?t:e+t:t
}function o(e,o,r){return n(e,t(o,r))}e.getHighContrastImage=t,e.getImagePath=n,e.getHighContrastImageUrl=o}(t=e.HighContrast||(e.HighContrast={}))}(t=e.Util||(e.Util={}))}(t=e.Account||(e.Account={}))}(wLive||(wLive={})),function(){function e(){window.opener&&(t(),setTimeout(t,100))}function t(){var e=r.getDocumentHeight()-r.getWindowViewHeight()+5;if(e){try{var t=r.getHeight()-(r.getWindowHeight()+e);0>t&&(e+=t,window.moveBy(0,t)),window.resizeBy(0,e)}catch(n){}}}var n=window,o=n.wLive,r={"getHeight":function(){return window.screen.availHeight
},"getWindowViewHeight":function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0},"getWindowHeight":function(){return window.outerHeight||r.getWindowViewHeight()+50},"getDocumentHeight":function(){return Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)}};registerNamespace("wLive.Account"),o.Account.PopupHelper={"resizeWindow":e,"doResize":t}}(),function(){function e(){I.IsHosted?l.Account.Page.SetupWizardHostFooterEvents():H.resizeWindow();
var e=$PageHelper.byId(F),n=$PageHelper.byId(N),o=$PageHelper.byId(O);I.hasPendingOffers?n.on("click",function(){return v?(e.hide(),v=!1,n.text(b.seePermissions)):(e.show(),v=!0,n.text(b.hidePermissions)),!1}):(e.show(),v=!0),g(),t(),u(),$PageHelper.byId("UpdateConsent").on("submit",function(){return C?!1:(C=!0,!0)}),$PageHelper.byId(V).on("click",function(){s(!1)}),o.on("click",function(){s(!0)})}function t(){M=$PageHelper.byId(x),X=$PageHelper.byId(z),j=$PageHelper.byId(R),q=$PageHelper.byId(G),j.focus(),j.on("click",function(){return i(),$ReportEvent.Action({"pageId":I.pageId,"userAction":["Action_AppInfoLinkClick"]}),!1
}),X.on("click",function(){return r(),!1}),$PageHelper.get(document).on("mouseup",function(e){$&&!M.is(e.target)&&0===M.has(e.target).length?n():!$&&(M.is(e.target)||M.has(e.target).length>0)&&o()}),$PageHelper.get(document).on("keydown",function(e){if(y){switch(e.keyCode){case m:r();break;case P:$&&(c(e),$PageHelper.hasFocus(X)?$PageHelper.byId("AppInfoTable").focus():X.focus());break;case A:$?n(!0):o(!0),c(e)}}})}function n(e){q.attr("aria-hidden","false"),M.attr("aria-hidden","true"),X.attr("tabindex","-1"),X.blur(),e&&j.focus(),$=!1
}function o(e){q.attr("aria-hidden","true"),M.attr("aria-hidden","false"),X.attr("tabindex","0"),e&&X.focus(),$=!0}function r(){j.attr("aria-expanded","false"),M.hide(),n(!0),$PageHelper.get(window).off("resize"),y=!1}function i(){j.attr("aria-expanded","true"),M.show(),a(),o(!0),$PageHelper.get(window).on("resize",function(){a()}),y=!0}function a(){M.offset({"top":j.offset().top+j.height()})}function c(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function g(){var e=$PageHelper.byId(W),t=$PageHelper.byId(D);
if(I.IsAppConfirmFlow?($PageHelper.byId(S).attr("class","bold"),$PageHelper.byId(L).show()):($PageHelper.byId(U).on("click",p),$PageHelper.byId(E).on("click",p)),b.appTosUrl&&b.appPrivacyUrl){var n=$PageHelper.byId(_),o=$PageHelper.byId(B);n.attr("href",b.appTosUrl),n.attr("target","_blank"),n.attr("rel","noopener"),n.on("click",function(){return $ReportEvent.Action({"pageId":I.pageId,"userAction":["Action_AppTermsOfServiceLinkClick"]}),!0}),o.attr("href",b.appPrivacyUrl),o.attr("target","_blank"),o.attr("rel","noopener"),o.on("click",function(){return $ReportEvent.Action({"pageId":I.pageId,"userAction":["Action_AppPrivacyLinkClick"]}),!0
}),e.show(),t.remove()}else{$PageHelper.byId(T).attr("class","bold"),t.show(),e.remove()}}function p(){var e=$PageHelper.byId(L),t=$PageHelper.byId(U),n=$PageHelper.byId(E);return t.toggle(),e.toggle(),$PageHelper.visible(e)?(n.focus(),$ReportEvent.Action({"pageId":I.pageId,"userAction":["Action_AppTermsShowDetailsClick"]})):t.focus(),!1}function s(e){$ReportEvent.Action(e?{"pageId":I.pageId,"userAction":["Action_ConsentAcceptClick"]}:{"pageId":I.pageId,"userAction":["Action_ConsentDenyClick"]})}function u(){if(w&&k){var e=$PageHelper.byClassName("checkmark-badge"),t=w.getHighContrastImage(k.checkmarkBadge,{"forBlackBackground":k.checkmarkBadgeWhite});
e.length>0&&t&&t!=k.checkmarkBadge&&e.attr("src",t)}}var d=window,l=d.wLive,f=l.Account,h=f.Util,H=f.PopupHelper,w=h&&h.HighContrast,I=d.$Config.WLXAccount.updateConsent,b=I.strings,k=I.imgs,m=27,P=9,A=117,v=!1,y=!1,$=!1,C=!1,L="id_AppTermsDetails",_="appterms",B="appprivacy",W="id_AppTermsIncludeLinks",D="id_AppTermsIncludeWarning",T="missingTermsWarning",U="id_ShowDetails",E="id_HideDetails",x="AppInfoPopOver",z="appInfoCloseLink",R="appDomainLinkToAppInfo",S="importantLabel",O="idBtn_Accept",V="idBtn_Deny",F="idDiv_GrantedOfferSection",N="idLink_GrantedAppToggle",G="iPageElt",M=null,X=null,j=null,q=null;
registerNamespace("wLive.Account.UpdateConsent"),l.Account.UpdateConsent.Init=e}();